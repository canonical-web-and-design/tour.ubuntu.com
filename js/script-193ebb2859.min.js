function setup(){var e=new Image;$(e).attr("src","../img/welcome/background-welcome.jpg").load(function(){$("#loader").hide()}),setupSystemSettings(),setupGuidedTourSystem(),setupShotwellSystem(),setupSystemMenu(),setupSystemOverlay(),setupFirefoxSystem(),setupEmailSystem(),setupErrorMessage(),setupUbuntuOneSystem(),setupFileSystem(),setupShutdownSystem(),setupMoviePlayerSystem(),setupLibreSystem(),setupNotificationSystem(),setupSoftwareSystem(),setupWelcomeSystem(),init()}function init(){$(window).resize(function(){systemOverlay.resize(),ubuntuOneSystem.isOpen()&&ubuntuOneSystem.resize(),welcomeSystem.isOpen()&&welcomeSystem.resize(),systemMenu.resize()}),$(document).mousemove(function(e){null!=movingFolder&&(movingFolder.css("left",e.pageX-folderXOffset),movingFolder.css("top",Math.max(24,e.pageY-folderYOffset)))}),$(".control").mousedown(function(e){movingFolder=$(this).parent(),folderXOffset=e.pageX-movingFolder.position().left,folderYOffset=e.pageY-movingFolder.position().top}),$("#tour-guide").mousedown(function(e){movingFolder=$(this),folderXOffset=e.pageX-movingFolder.position().left,folderYOffset=e.pageY-movingFolder.position().top}),$(document).mouseup(function(){movingFolder=null}),$(".window").mousedown(function(){if(-1!=$(this).attr("class").indexOf("firefox-window")?-1==$(this).attr("class").indexOf("fullsize")?($(".firefox-window .web-overlay-tran").css("width","100%"),$(".firefox-window .web-overlay-tran").hide()):($(".firefox-window .web-ubuntuOneSystemoverlay-tran").css("width","100px"),$(".firefox-window .web-overlay-tran").show()):($(".firefox-window .web-overlay-tran").css("width","100%"),$(".firefox-window .web-overlay-tran").show()),$(".window").css("z-index",2),$(".window").removeClass("selected-window"),$("#top #top-left #title").text($(".window-title",this).text()),$("."+currentSystemSelected).css("z-index",3),$(this).css("z-index",4),$("css3-container").length>0&&($("css3-container").css("z-index",2),$("."+currentSystemSelected).prev().css("z-index",3),$(this).prev().css("z-index",4)),$(this).addClass("selected-window"),openWindows[$(this).attr("id")]=!0,currentSystemSelected!=$(this).attr("class").replace(" window","").replace(" fullsize","").replace(" selected-window","").replace(" window","")){currentSystemSelected=$(this).attr("class").replace(" fullsize",""),currentSystemSelected=currentSystemSelected.replace(" selected-window",""),currentSystemSelected=currentSystemSelected.replace(" window",""),$("#menu ul li .selected-window-arrow").hide();var e=currentSystemSelected;"folder"==e&&(e="home"),"firefox-window"==e&&(e="firefox"),"email-window"==e&&(e="email"),$("#menu ul li."+e+" .selected-window-arrow").show(),guidedTourSystem.setSystem(e)}}),setupTopMenu()}function noWIndowSelected(){currentSystemSelected=null,$("#menu ul li .selected-window-arrow").hide()}function setupTopMenu(){$("#top #top-right div").bind("click",function(){var e=$(this).hasClass("selected");closeTopRightDropDowns(),e?$("#top #top-right div").unbind("mouseover"):($(this).addClass("selected"),$(".drop-down",this).show(),addTransOverlay(),$("#top #top-right div").bind("mouseover",function(){$(this).hasClass("selected")||($("#top #top-right div").removeClass("selected"),$("#top #top-right .drop-down").hide(),$(this).addClass("selected"),$(".drop-down",this).show())}))}),$("#top #top-right div ul li").bind("click",function(){switch($.trim($(this).text())){case _turn_off_bluetooth_:systemSettings.setBluetooth(!1),$(this).text(_turn_on_bluetooth_);break;case _turn_on_bluetooth_:systemSettings.setBluetooth(!0),$(this).text(_turn_off_bluetooth_);break;case _visible_:systemSettings.bluetoothVisible()?(systemSettings.setBluetoothVisible(!1),$(this).removeClass("ticked")):(systemSettings.setBluetoothVisible(!0),$(this).addClass("ticked"));break;case _mute_:systemSettings.setMute(!0),sliderUpdate(0,1),$(this).text(_unmute_);break;case _unmute_:systemSettings.setMute(!1),sliderUpdate(systemSettings.volume(),0),$(this).text(_mute_);break;case _shut_down_:shutdownSystem.open();break;default:errorMessage.open()}}),$("#top #top-right #speakers .slider").slider({min:0,max:100,step:1,value:30,slide:function(e,t){currentPercent=$(this).slider("option","value"),_this.sliderUpdate(currentPercent)},stop:function(e,t){currentPercent=$(this).slider("option","value"),_this.sliderUpdate(currentPercent),_this.systemSettings.setVolume(currentPercent)}}),$("#top #top-left #control-buttons div").bind("click",function(){var e=$(this).attr("id");$("."+currentSystemSelected+" .control ."+e).trigger("click")}),$("#top #top-right #speakers .banshee").mouseover(function(){$("#top #top-right #speakers .banshee .banshee-play").css("background-image","url(../img/top/banshee-play-highlight.png)")}),$("#top #top-right #speakers .banshee").mouseout(function(){$("#top #top-right #speakers .banshee .banshee-play").css("background-image","url(../img/top/banshee-play.png)")})}function sliderUpdate(e,t){var i=parseInt(195*e/100);10>i&&(i=0),$("#top #top-right #speakers .drop-down .slider-active").css("width",i);var s=0;systemSettings.mute()?s=0:1>=e?s=1:35>=e?s=2:75>=e?s=3:e>=75&&(s=4),void 0!=t&&(t?$("#top #top-right #speakers .slider").slider({value:0}):$("#top #top-right #speakers .slider").slider({value:systemSettings.volume()})),$("#top #top-right #speakers img.speakers-logo").attr("src","../img/top/speakers"+s+".png")}function closeTopRightDropDowns(){$("#top #top-right div").removeClass("selected"),$("#top #top-right .drop-down").hide(),$(".fullscreenTransOverlay").unbind("click"),$(".fullscreenTransOverlay").remove(),$("#top #top-right div").unbind("mouseover")}function addTransOverlay(){$("body").append('<div class="fullscreenTransOverlay"></div>'),$(".fullscreenTransOverlay").bind("click",function(){closeTopRightDropDowns()})}function setupSystemSettings(){systemSettings=new SystemSettings(this),systemSettings.init()}function setupErrorMessage(){errorMessage=new ErrorMessage(this),errorMessage.init()}function setupSystemOverlay(){systemOverlay=new SystemOverlay(this),systemOverlay.init()}function setupSystemMenu(){systemMenu=new SystemMenu(this),systemMenu.init()}function setupLibreSystem(){libreSystem=new LibreSystem(this),libreSystem.init()}function setupSoftwareSystem(){softwareSystem=new SoftwareSystem(this),softwareSystem.init()}function setupNotificationSystem(){notificationSystem=new NotificationSystem,notificationSystem.init()}function setupShutdownSystem(){shutdownSystem=new ShutdownSystem,shutdownSystem.init()}function setupFirefoxSystem(){firefoxSystem=new FirefoxSystem(this),firefoxSystem.init()}function setupMoviePlayerSystem(){moviePlayerSystem=new MoviePlayerSystem(this),moviePlayerSystem.init()}function setupEmailSystem(){emailSystem=new EmailSystem(this),emailSystem.init()}function setupUbuntuOneSystem(){ubuntuOneSystem=new UbuntuOneSystem(this),ubuntuOneSystem.init()}function setupFileSystem(){fileSystem=new FileSystem(this),fileSystem.init()}function setupWelcomeSystem(){welcomeSystem=new WelcomeSystem(this),welcomeSystem.init()}function setupGuidedTourSystem(){guidedTourSystem=new GuidedTourSystem(this),guidedTourSystem.init()}function closeAllWindows(e){var t=e;$("#systemOverlay").hide(),errorMessage.close(),firefoxSystem.close(),emailSystem.close(),ubuntuOneSystem.close(),fileSystem.close(),shotwellSystem.close(),libreSystem.close("writer"),libreSystem.close("calc"),libreSystem.close("impress"),softwareSystem.close(),moviePlayerSystem.close(),guidedTourSystem.setIndex(t)}function setupShotwellSystem(){fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/Buckoff.jpg","photo",_buck_off_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/DarkeningClockwork.jpg","photo",_darkening_clockwork_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/DybblsbroStation.jpg","photo",_dybbølsbro_station_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/FedericaMiglio.jpg","photo",_federica_miglio_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/JardinPolar.jpg","photo",_jardin_polar_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/LangelinieAlle.jpg","photo",_langelinie_alle_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/MomijiDream.jpg","photo",_momiji_dream_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/MountSnowdon.jpg","photo",_mount_snowdon_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/NotAlone.jpg","photo",_not_alone_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/PowerOfWords.jpg","photo",_power_of_words_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/PurpleDancers.jpg","photo",_purple_dancers_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/SandMaze.jpg","photo",_sand_maze_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/SmallFlowers.jpg","photo",_small_flowers_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/StalkingOcelot.jpg","photo",_stalking_ocelot_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/TheGrassAintGreener.jpg","photo",_the_grass_aint_greener_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../img/shotwell/library/WildWheat.jpg","photo",_wildWheat_title_,_photo_size_,_photo_date_,"/"+_home_folder_+"/"+_pictures_folder_)),fileLibrary.push(new File(fileLibrary.length,"../videos/IAmWeAre.flv","video",_introduction_ubuntu_title_,_video_size_,_video_date_,"/"+_home_folder_+"/"+_videos_folder_)),fileLibrary.push(new File(fileLibrary.length,"../audio/preview.mp3","audio",_Happiness_title_,_music_size_,_music_date_,"/"+_home_folder_+"/"+_music_folder_)),shotwellSystem=new ShotwellSystem(this),shotwellSystem.init()}function topShadow(e){e?($("#top").addClass("dropShadow"),$("#control-buttons").hide(),$("#top").unbind("mouseover"),$("#top").unbind("mouseout")):($("#top").removeClass("dropShadow"),$("#top").bind("mouseover",function(){currentSystemSelected=currentSystemSelected.replace(" pie_hover","");var e=$("."+currentSystemSelected).hasClass("fullsize");!$("#systemOverlay").is(":visible")&&e&&$("#control-buttons").show()}),$("#top").bind("mouseout",function(){$("#control-buttons").hide()}))}function blurWindows(){var e="",t=0,s="";for(i in openWindows)1==openWindows[i]&&($("#"+i).addClass("blurred"),$.each($("#"+i+" *"),function(){$(this).is("img")?(e=$(this).attr("src"),t=e.lastIndexOf("/"),s=e.substr(0,t)+"/blur"+e.substr(t),$(this).attr("src",s)):(e=$(this).css("background-image"),"none"!=e&&(t=e.lastIndexOf("/"),s=e.substr(0,t)+"/blur"+e.substr(t),$(this).css("background-image",s)))}));$.each($("#top-right *"),function(){$(this).is("img")?(e=$(this).attr("src"),t=e.lastIndexOf("/"),s=e.substr(0,t)+"/blur"+e.substr(t),$(this).attr("src",s)):(e=$(this).css("background-image"),"none"!=e&&(t=e.lastIndexOf("/"),s=e.substr(0,t)+"/blur"+e.substr(t),$(this).css("background-image",s)))})}function unblurWindows(){var e="",t="";for(i in openWindows)1==openWindows[i]&&($("#"+i).removeClass("blurred"),$.each($("#"+i+" *"),function(){$(this).is("img")?(e=$(this).attr("src"),t=e.replace("/blur",""),$(this).attr("src",t)):(e=$(this).css("background-image"),"none"!=e&&(t=e.replace("/blur",""),$(this).css("background-image",t)))}));$.each($("#menu *"),function(){$(this).is("img")?(e=$(this).attr("src"),t=e.replace("/blur",""),$(this).attr("src",t)):(e=$(this).css("background-image"),"none"!=e&&(t=e.replace("/blur",""),$(this).css("background-image",t)))}),$.each($("#top-right *"),function(){$(this).is("img")?(e=$(this).attr("src"),t=e.replace("/blur",""),$(this).attr("src",t)):(e=$(this).css("background-image"),"none"!=e&&(t=e.replace("/blur",""),$(this).css("background-image",t)))})}function WelcomeSystem(e){var t=e,i=this,s=!1,n=500,o=$("#welcome #welcome-screen").outerWidth();this.init=function(){this.center(),this.open(),$("#welcome #welcome-screen ul a").bind("click",function(e){i.startTour($(this).attr("class"))}),$("#welcome #welcome-screen .explore-mode").bind("click",function(e){i.startTour("explore-mode")}),$("#welcome #welcome-screen .tour-mode").bind("click",function(e){i.startTour("tour-mode")}),$("#welcome #welcome-screen .close").bind("click",function(e){i.startTour("explore-mode")}),$("#welcome  #welcome-screen").show();var e=window.location.hash;void 0!=e&&i.startTour(e.substring(1))},this.startTour=function(e){switch(e){case"browse-files":$("#welcome").hide(),s=!1,t.guidedTourSystem.setCurrentIndex(0),t.systemMenu.handleMenuClick("home");break;case"surf-the-web":$("#welcome").hide(),s=!1,t.guidedTourSystem.setCurrentIndex(1),t.systemMenu.handleMenuClick("firefox");break;case"check-email":$("#welcome").hide(),s=!1,t.guidedTourSystem.setCurrentIndex(2),t.systemMenu.handleMenuClick("email");break;case"view-photos":$("#welcome").hide(),s=!1,t.guidedTourSystem.setCurrentIndex(3),t.systemMenu.handleMenuClick("shotwell");break;case"find-apps":$("#welcome").hide(),s=!1,t.guidedTourSystem.setCurrentIndex(4),t.systemMenu.handleMenuClick("software");break;case"create-documents":$("#welcome").hide(),s=!1,t.guidedTourSystem.setCurrentIndex(5),t.systemMenu.handleMenuClick("writer");break;case"create-presentations":$("#welcome").hide(),s=!1,t.guidedTourSystem.setCurrentIndex(6),t.systemMenu.handleMenuClick("impress");break;case"create-spreadsheets":$("#welcome").hide(),s=!1,t.guidedTourSystem.setCurrentIndex(7),t.systemMenu.handleMenuClick("calc");break;case"watch-video":$("#welcome").hide(),s=!1,t.guidedTourSystem.setCurrentIndex(8),t.systemMenu.handleMenuClick("movieplayer"),t.moviePlayerSystem.addVideo();break;case"explore-mode":$("#welcome").hide(),s=!1;break;case"tour-mode":$("#welcome").hide(),s=!1,t.guidedTourSystem.setCurrentIndex(0),t.systemMenu.handleMenuClick("home");break;default:return!1}$("#tour-guide .explore-to-welcome").bind("click",function(){i.open()}),$("#tour-guide .explore-to-download").bind("click",function(){t.errorMessage.open()}),$("#tour-guide .explore-to-exit").bind("click",function(){window.location.replace("http://www.ubuntu.com")})},this.open=function(){s=!0,$("#welcome").show()},this.center=function(){var e=$(document).width()/2-o/2,t=Math.max(24,$(document).height()/2-n/2);$("#welcome #welcome-screen").css("left",e),$("#welcome #welcome-screen").css("top",t)},this.resize=function(){this.center()},this.isOpen=function(){return s}}function GuidedTourSystem(e){var t,s,n,o,r,a,l,d,c,m,h=e,u=this,p=!1,f=-1,_=0;this.init=function(){homeGuide={system:"welcome",icon:null,title:null,desc:'We hope you\'ve enjoyed the Ubuntu online tour. <a href="http://www.ubuntu.com/download/ubuntu/download#tour" target="_blank">Ready to download?</a> or <a href="/ubuntu/take-the-tour" >Back to the site</a>',hash:"#"},t={system:"home",icon:"img/tourguide/file-small.png",title:"Browse files",desc:"It’s quick and easy to access your folders and files from Ubuntu’s home folder.",hash:"browser-files"},s={system:"firefox",icon:"img/tourguide/firefox-small.png",title:"Surf the web",desc:"Browsing the web is fast and secure with Ubuntu and Firefox.",hash:"surf-the-web"},n={system:"email",icon:"img/tourguide/mail-small.png",title:"Check email",desc:"Read, write and send emails with Thunderbird. It’s easy and fast.",hash:"check-email"},o={system:"shotwell",icon:"img/tourguide/shotwell-small.png",title:"View photos",desc:"You can upload, organise, edit and share your photos with Shotwell.",hash:"view-photos"},r={system:"software",icon:"img/tourguide/apps-small.png",title:"Find apps",desc:"Search and download apps fast from the Ubuntu Software Centre.",hash:"find-apps"},a={system:"writer",icon:"img/tourguide/document-small.png",title:"Create documents",desc:"LibreOffice Writer makes it easy to draft professional documents.",hash:"create-documents"},d={system:"calc",icon:"img/tourguide/calc-small.png",title:"Create spreadsheets",desc:"LibreOffice Calc has everything you need to create clear and accurate spreadsheets.",hash:"create-spreadsheets"},l={system:"impress",icon:"img/tourguide/impress-small.png",title:"Create presentations",desc:"Make a good impression with the intuitive LibreOffice Impress presentation tool.",hash:"create-presentations"},c={system:"movieplayer",icon:"img/tourguide/impress-small.png",title:"Watch videos",desc:"You can watch all your favourite films and videos, DVDs, downloads or movies youve created yourself.",hash:"watch-video"},m=new Array(t,s,n,o,r,a,d,l,c),_=m.length,$("#tour-guide .next-button").bind("click",function(){$(this).hasClass("disabled")||u.next()}),$("#tour-guide .prev-button").bind("click",function(){$(this).hasClass("disabled")||u.prev()}),$("#tour-guide .back-to-download").bind("click",function(){h.errorMessage.open()}),this.update()},this.close=function(){h.closeAllWindows(closeAllWindows)},this.setSystem=function(e){if("email-write"==e&&(e="email"),!p){var t=!1;for(i=0;i<m.length;i++)if(m[i].system==e){this.setCurrentIndex(i),t=!0;break}t||this.setCurrentIndex(-1)}},this.setIndex=function(e){f=e},this.setCurrentIndex=function(e,t){f=e,this.update()},this.next=function(){p=!0,h.closeAllWindows(f),f==_-1?f=0:f++,this.update(),this.updateHash(),h.systemMenu.handleMenuClick(m[f].system),p=!1},this.prev=function(){p=!0,h.closeAllWindows(f),0==f?f=_-1:f--,this.update(),this.updateHash(),h.systemMenu.handleMenuClick(m[f].system),p=!1},this.update=function(){$("#tour-guide .guide-container").hide(),-1==f?$("#tour-guide .welcome").show():($("#tour-guide ."+m[f].system).show(),$("#tour-guide .prev-button").show(),$("#tour-guide .next-button").show())},this.updateHash=function(){window.location.hash=m[f].hash}}function FileSystem(e,t){var i=e,s="/"+_home_folder_;void 0==t&&(t=s);var n=t,o=new Array,r=new Array,a=-1,l="",d=this,c=0,m=-1,h=!1,u=!1,p=!1,f="display-icon",_=-1,w=0;this.init=function(){o.push(new Folder(_documents_folder_,"/"+_home_folder_,"icon-documents")),o.push(new Folder(_downloads_folder_,"/"+_home_folder_,"icon-downloads")),o.push(new Folder(_music_folder_,"/"+_home_folder_,"icon-music")),o.push(new Folder(_videos_folder_,"/"+_home_folder_,"icon-videos")),o.push(new Folder(_pictures_folder_,"/"+_home_folder_,"icon-pictures")),o.push(new Folder(_desktop_folder_,"/"+_home_folder_,"icon-desktop")),o.push(new Folder(_canonical_folder_,"/"+_home_folder_+"/"+_documents_folder_)),o.push(new Folder(_backup_folder_,"/"+_home_folder_+"/"+_documents_folder_)),o.push(new Folder(_local_folder_,"/"+_home_folder_+"/"+_documents_folder_)),o.push(new Folder(_work_folder_,"/"+_home_folder_+"/"+_documents_folder_+"/"+_canonical_folder_)),o.push(new Folder(_branches_folder_,"/"+_home_folder_+"/"+_documents_folder_+"/"+_canonical_folder_)),o=o.concat(i.fileLibrary),this.setupControl()},this.setupControl=function(){$(".folder .control .close").click(function(){d.close()}),$(".folder .control .min").click(function(){u&&i.systemSettings.decreaseFullscreen(),$(".folder").hide(),i.systemMenu.wiggle("home"),h=!0}),$(".folder .control .max").click(function(){u?(u=!1,$(".folder").css("height","500px"),$(".folder").css("width","730px"),$(".folder").removeClass("fullsize"),i.systemSettings.decreaseFullscreen()):(u=!0,$(".folder").css("height",$(document).height()+"px"),$(".folder").css("width",$(document).width()-70+"px"),$(".folder").addClass("fullsize"),i.systemSettings.increaseFullscreen()),d.resize(),d.center()}),$("#folder-window .folder-list .list ul li").click(function(){$("#folder-window .folder-list .list ul li").removeClass("selected"),$(this).addClass("selected");var e=!0,t=$(this).attr("data-folder"),i="";"home"==t?i="/"+_home_folder_:"bin"==t?(i="/"+_rubbish_bin_folder_,e=!1):i=o[t].location()+"/"+o[t].name(),d.clickedNewFolder(i),d.updateDir(i,e)}),this.updateDir(n),this.center()},this.reset=function(e){e&&(n="/"+_home_folder_,r=new Array,a=-1,l="",c=0,m=-1,h=!1),this.updateDir(n)},this.open=function(){$(".folder").show(),p=!0,$("css3-container").length>0&&($(".folder").prev().css("top",$(".folder").css("top")),$(".folder").prev().css("left",$(".folder").css("left")))},this.isMinified=function(){return h},this.isMaximised=function(){return u},this.in_bin=function(){return _in_bin},this.close=function(){p&&(i.openWindows["folder-window"]=!1,u&&i.systemSettings.decreaseFullscreen(),$(".folder").hide(),i.systemMenu.closeWindow("home"),$(".folder").removeClass("fullsize"),d.resize(),d.center(),p=!1,h=!1,u=!1)},this.isOpen=function(){return p},this.setupFolderControl=function(){$(".folder-contents .contents div").mouseover(function(){$(this).addClass("over")}),$(".folder-contents .contents div").mouseout(function(){$(this).removeClass("over")}),$(".folder-contents .contents").mousedown(function(){$(".folder-contents .contents div").removeClass("selected"),$(".selected-details").hide()}),$(".folder-contents .contents div").mousedown(function(e){e.stopPropagation(),$(".folder-contents .contents div").removeClass("selected"),$(this).addClass("selected"),d.showSelectedDetails(parseInt($(this).attr("data-id")))}),$(".folder-contents .contents div").dblclick(function(){switch(_=$(this).attr("data-id"),$(this).attr("data-type")){case"folder":var e=n+"/"+o[_].name();d.clickedNewFolder(e),d.updateDir(e);break;case"photo":i.shotwellSystem.selectImage(o[$(this).attr("data-id")].id()),i.shotwellSystem.open();break;case"video":i.moviePlayerSystem.open(),i.moviePlayerSystem.addVideo();break;case"audio":i.errorMessage.open();break;default:i.errorMessage.open()}})},this.showSelectedDetails=function(e){var t=o[e].name(),i=0;if("folder"==o[e].type()){for(var s=o.length;s--;)o[s].location()==o[e].location()+"/"+t&&i++;$(".selected-details").text('"'+t+'" '+_string_selected_+" ("+_string_containing_+" "+i+" "+_string_items_+")")}else $(".selected-details").text('"'+t+'" '+_string_selected_+" ("+o[e].size()+")");$(".selected-details").show()},this.setupBreadcrumbControl=function(){$("#folder-window .bottom-buttons div").bind("click",function(){$(this).addClass("selected");var e=$(this).attr("data-id");d.history_index=e,d.updateDir(r[e])})},this.clickedNewFolder=function(){var e=$.inArray(n,r);if(e>-1)for(var t=r.length-1-e;t--;)r.pop();$(".selected-details").hide()},this.refresh=function(){c=0,$(".folder-contents .contents").html(""),l="";for(var e=o.length;e--;)o[e].location()==n&&(l+=o[e].drawIcon(e,f),c++);$(".folder-contents .contents").html(l),$("#folder-window .bottom-buttons div").unbind("click");var t="";for(e=0;e<r.length;e++){var i=r[e].split("/");i=i[i.length-1],"Home"==i&&(i='<span class="home"></span>'+i),"Desktop"==$.trim(i)&&(i='<img src="../img/folder/desktop-icon.png"/>'+i),t+=e==a?'<div data-id="'+e+'" class="selected">'+i+"</div>":'<div data-id="'+e+'">'+i+"</div>"}i=r[a].split("/"),i=i[i.length-1],$("#folder-window .bottom-buttons").html(t),$(".folder .window-title").text(i),this.setupBreadcrumbControl(),this.setupFolderControl()},this.getFiles=function(){return o},this.backDir=function(){a--,this.updateDir(r[a])},this.forwardDir=function(){a++,this.updateDir(r[a])},this.updateDir=function(e,t){var i=e.split("/"),s=i[i.length-1].toLowerCase();"rubbish bin"==s&&(s="rubbish"),void 0==t&&($("#folder-window .folder-list .list ul li").removeClass("selected"),$('#folder-window .folder-list .list ul li[data-folder="'+_+'"]').addClass("selected")),n=e,void 0==t&&(t=!1);var o=$.inArray(e,r);o>-1?a=o:t?(a=1,r=new Array("/"+_home_folder_,e)):n.split("/").length>2?(a++,r.push(e)):(a=0,r=new Array,r.push(e)),a>0?this.backButton(!0):this.backButton(!1),a<r.length-1?this.forwardButton(!0):this.forwardButton(!1),this.refresh()},this.backButton=function(e){e?$(".buttons .folder-back").hasClass("disabled")&&($(".buttons .folder-back").bind("click",function(){d.backDir()}),$(".buttons .folder-back").removeClass("disabled")):$(".buttons .folder-back").hasClass("disabled")||($(".buttons .folder-back").unbind("click"),$(".buttons .folder-back").addClass("disabled"))},this.forwardButton=function(e){e?$(".buttons .folder-forward").hasClass("disabled")&&($(".buttons .folder-forward").bind("click",function(){d.forwardDir()}),$(".buttons .folder-forward").removeClass("disabled")):$(".buttons .folder-forward").hasClass("disabled")||($(".buttons .folder-forward").unbind("click"),$(".buttons .folder-forward").addClass("disabled"))},this.center=function(){var e=$(document).width()/2-$(".folder").width()/2,t=Math.max(24,$(document).height()/2-$(".folder").height()/2);$(".folder").css("left",e),$(".folder").css("top",t)},this.resize=function(){w=$(".folder").width()-146,folderListHeight=$(".folder").height()-51,$(".folder .folder-list .list").css("height",folderListHeight-30),$(".folder .folder-contents .contents").css("height",folderListHeight-17),$(".folder .folder-contents .contents").css("width",w)}}function Folder(e,t,i){void 0==e&&(e="Untitled Folder"),void 0==t&&(t="/Home"),void 0==i&&(i="");var s=e,n="6.2 GB",o=t,r=!1,a=i;this.name=function(){return s},this.size=function(){return n},this.location=function(){return o},this.in_bin=function(){return r},this.icon=function(){return a},this.rename=function(e){s=e},this.bin=function(e){r=e},this.move=function(e){o=e},this.drawIcon=function(e,t){return"<div class='file-folder "+this.icon()+" "+t+"' data-type='folder' data-id='"+e+"'><p></p><span>"+s+"</span></div>"},this.type=function(){return"folder"}}function SystemOverlay(e){var t,i,s,n,o=e,r=this,a=!1;this.totalApps;var l;this.init=function(){n=new Array({name:_chromium_app_,image:"img/software-centre/logo-chromium.png"},{name:_beep_app_,image:"img/software-centre/logo-beep.png"},{name:_inkscape_app_,image:"img/software-centre/logo-inkscape.png"},{name:_world_of_goo_app_,image:"img/software-centre/logo-world-of-goo.png"},{name:_blender_app_,image:"img/software-centre/logo-blender.png"},{name:_braid_app_,image:"img/software-centre/logo-braid.png"}),t=new Array({name:_rhythmbox_app_,image:"rhythmbox.png"},{name:_brasero_app_,image:"brasero.png"},{name:_movie_player_app_,image:"movieplayer.png"},{name:_shotwell_app_,image:"shotwell.png"},{name:_pitivi_app_,image:"pitivi.png"},{name:_ubuntu_one_music_app_,image:"ubuntuonemusic.png"},{name:_sound_recorder_app_,image:"soundrecorder.png"}),i=new Array({name:_empathy_app_,image:"empathy.png"},{name:_thunderbird_app_,image:"thunderbird.png"},{name:_firefox_app_,image:"firefox.png"},{name:_gwibber_app_,image:"gwibber.png"},{name:_remote_desktop_app_,image:"remotedesktop.png"},{name:_terminal_app_,image:"terminalserver.png"},{name:_amazon_app_,image:"amazon.png"},{name:_ubuntu_one_app_,image:"ubuntuone.png"}),s=new Array({name:_about_me_app_,image:"aboutme.png"},{name:_additional_drivers_app_,image:"additionaldrivers.png"},{name:_aisleroit_app_,image:"solitaire.png"},{name:_appearance_app_,image:"appearance.png"},{name:_ubuntu_software_center_app_,image:"ubuntusoftwarecenter.png"},{name:_bluetooth_app_,image:"bluetooth.png"}),this.totalApps=t.concat(i,s),$("#systemOverlay input").val(_search_),this.setupTopControl()},this.open=function(){o.closeTopRightDropDowns(),a?r.closeOverlay():r.openOverlay(),this.resize()},this.setupTopControl=function(){$("#systemOverlay .copyDash").bind("click",function(e){r.closeOverlay()}),$("#top #top-left #dash-control-buttons .close").bind("click",function(e){r.closeOverlay()}),$("#systemOverlay input").keyup(function(){r.appSearch($(this).val())}),this.resize(),$("#systemOverlay #dash-bottom-bar .bottom-wrapper div").click(function(){switch($("#systemOverlay #dash-bottom-bar .bottom-wrapper div").removeClass("active"),$(this).attr("class").replace(" last","")){case"home-icon":r.showHome();break;case"applications-icon":r.displayApps();break;case"files-icon":r.displayFindApps();break;case"music-icon":r.displayMusic();break;case"video-icon":r.displayVideo();break;case"photos-icon":r.displayPhotos();break;case"chat-icon":r.displayChat()}$(this).addClass("active")});var e=$("#systemOverlay input");e.focus(function(){$(this).val()==_search_&&($(this).val(""),$(this).css("font-style","normal"),$(this).css("color","#fff"))}),e.blur(function(){""==$(this).val()&&($(this).val(_search_),$(this).css("font-style","italic"),$(this).css("color","#aaa"),r.reset())})},this.removeApps=function(e){for(var t=0;t<this.totalApps.length;t++)if(this.totalApps[t].name==e){this.totalApps.splice(t,1);break}},this.appSearch=function(e){if(""!=e){var t="";l=o.fileSystem.getFiles();for(var i="",s=this.totalApps.length,n=new Array,a=new RegExp(e,"gi");s--;)n=this.totalApps[s].name.match(a),null!=n&&(i+="../img/"==this.totalApps[s].image.substr(0,7)?'<div><img src="'+this.totalApps[s].image+'" /><p>'+this.totalApps[s].name+"</p></div>":'<div><img src="../img/applications/'+this.totalApps[s].image+'" /><p>'+this.totalApps[s].name+"</p></div>");for(var s=0;s<l.length;s++)n=l[s].name().match(a),null!=n&&(t+=this.getDisplayIcon(l[s],s));this.hideAll(),$("#systemOverlay #display-search .files .app-list").html(t),$("#systemOverlay #display-search .applications .app-list").html(i),$("#systemOverlay #display-search").show(),$("#systemOverlay .app-container .app-list div").bind("mouseover",function(){$("img",this).addClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("mouseout",function(){$("img",this).removeClass("hover")}),$("#systemOverlay .app-container .applications .app-list div").bind("click",function(){var e=!1;"download"==$(this).attr("data-type")&&(e=!0),r.appClicked($("img",this).attr("src"),e)}),$("#systemOverlay .app-container .files .app-list div").bind("click",function(){r.fileClicked($(this).attr("data-id"))})}else this.showHome()},this.getDisplayIcon=function(e,t){switch(e.type()){case"folder":return'<div data-id="'+t+'"><img src="../img/applications/folder-generic.png" /><p>'+e.name()+"</p></div>";case"audio":return'<div data-id="'+t+'"><img src="../img/applications/audio.png" /><p>'+e.name()+"</p></div>";case"video":return'<div data-id="'+t+'"><img src="../img/'+e.url().replace("flv","jpg").replace("../","")+'" /><p>'+e.name()+"</p></div>";case"photo":return'<div data-id="'+t+'"><img src="'+e.url()+'" /><p>'+e.name()+"</p></div>";default:return'<div data-id="'+t+'"><img src="../img/applications/unknown.png" /><p>'+e.name()+"</p></div>"}},this.hideAll=function(){$("#systemOverlay #overlayContents #display-home").hide(),$("#systemOverlay #overlayContents #display-apps").hide(),$("#systemOverlay #overlayContents #display-find-files").hide(),$("#systemOverlay #overlayContents #display-search").hide(),$("#systemOverlay #overlayContents #display-find-music").hide(),$("#systemOverlay #overlayContents #display-find-photos").hide(),$("#systemOverlay #overlayContents #display-chat").hide(),$("#systemOverlay #overlayContents #display-find-video").hide(),$("#systemOverlay #preview").hide()},this.showHome=function(){$("#systemOverlay #overlayContents #display-apps").hide(),$("#systemOverlay #overlayContents #display-find-files").hide(),$("#systemOverlay #overlayContents #display-search").hide(),
$("#systemOverlay #overlayContents #display-find-music").hide(),$("#systemOverlay #overlayContents #display-find-video").hide(),$("#systemOverlay #overlayContents #display-find-photos").hide(),$("#systemOverlay #overlayContents #display-chat").hide(),$("#systemOverlay #preview").hide(),$("#systemOverlay #overlayContents #display-home").show()},this.displayHome=function(){var e,t="",i="",s="",a=this.totalApps;e=a.slice(),e.sort(this.randOrd),n.sort(this.randOrd),l=o.fileSystem.getFiles();for(var d=0;d<a.length;d++)t+="../img"==a[d].image.substr(0,7)?'<div><img src="'+a[d].image+'" /><p>'+a[d].name+"</p></div>":'<div><img src="../img/applications/'+a[d].image+'" /><p>'+a[d].name+"</p></div>";for(var d=0;d<l.length;d++)"folder"!=l[d].type()&&(i+=this.getDisplayIcon(l[d],d));for(var d=l.length;d--;)"folder"!=l[d].type()&&(s+=this.getDisplayIcon(l[d],d));$("#systemOverlay #display-home .recent-apps .app-list").html(t),$("#systemOverlay #display-home .recent-files .app-list").html(i),$("#systemOverlay #display-home .downloads .app-list").html(s),$("#systemOverlay #display-find-files .downloads .app-list").html(s),$("#systemOverlay .app-container .app-list div").bind("mouseover",function(){$("img",this).addClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("mouseout",function(){$("img",this).removeClass("hover")}),$("#systemOverlay #display-home .recent-apps .app-list div").bind("click",function(){r.appClicked($("img",this).attr("src"),"download"==$(this).attr("data-type"))}),$("#systemOverlay #display-home .recent-files .app-list div").bind("click",function(){r.fileClicked($(this).attr("data-id"))}),$("#systemOverlay #display-home .downloads .app-list div").bind("click",function(){r.fileClicked($(this).attr("data-id"))})},this.displayApps=function(e){this.hideAll();var o,a,l="",d="",c="";o="media"==e?t:"internet"==e?i:"more"==e?s:this.totalApps,a=o.slice(),a.sort(this.randOrd),n.sort(this.randOrd);for(var m=0;m<o.length;m++)l+="img/"==o[m].image.substr(0,4)?'<div><img src="../'+o[m].image+'" /><p>'+o[m].name+"</p></div>":'<div><img src="../img/applications/'+o[m].image+'" /><p>'+o[m].name+"</p></div>";for(var m=0;m<a.length;m++)d+="img/"==a[m].image.substr(0,4)?'<div><img src="../'+a[m].image+'" /><p>'+a[m].name+"</p></div>":'<div><img src="../img/applications/'+a[m].image+'" /><p>'+a[m].name+"</p></div>";for(var m=0;m<n.length;m++)c+="img/"==n[m].image.substr(0,4)?'<div data-type="download"><img src="../'+n[m].image+'" /><p>'+n[m].name+"</p></div>":'<div data-type="download"><img src="../img/applications/'+n[m].image+'" /><p>'+n[m].name+"</p></div>";$("#systemOverlay #display-home").hide(),$("#systemOverlay #display-apps .available .app-list").html(c),$("#systemOverlay #display-apps .installed .app-list").html(l),$("#systemOverlay #display-apps .frequently .app-list").html(d),$("#systemOverlay #display-apps").show(),$("#systemOverlay .app-container .app-list div").bind("mouseover",function(){$("img",this).addClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("mouseout",function(){$("img",this).removeClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("click",function(){r.appClicked($("img",this).attr("src"),"download"==$(this).attr("data-type"))})},this.randOrd=function(){return Math.round(Math.random())-.5},this.displayMusic=function(){this.hideAll();var e="",t="";l=o.fileSystem.getFiles();for(var i=0;i<l.length;i++)"audio"==l[i].type()&&(e+=this.getDisplayIcon(l[i],i));$("#systemOverlay #display-find-music .songs .app-list").html(e),$("#systemOverlay #display-find-music .albums  .app-list").html(t),$("#systemOverlay #display-home").hide(),$("#systemOverlay #display-find-music").show(),$("#systemOverlay .app-container .app-list div").bind("mouseover",function(){$("img",this).addClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("mouseout",function(){$("img",this).removeClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("click",function(){r.appClicked($("img",this).attr("src"),"download"==$(this).attr("data-type"))})},this.displayVideo=function(){this.hideAll();var e="";l=o.fileSystem.getFiles();for(var t=0;t<l.length;t++)"video"==l[t].type()&&(e+=this.getDisplayIcon(l[t],t));$("#systemOverlay #display-find-video .videos .app-list").html(e),$("#systemOverlay #display-home").hide(),$("#systemOverlay #display-find-video").show(),$("#systemOverlay .app-container .app-list div").bind("mouseover",function(){$("img",this).addClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("mouseout",function(){$("img",this).removeClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("click",function(){r.fileClicked($(this).attr("data-id"))})},this.displayPhotos=function(){this.hideAll();var e="";l=o.fileSystem.getFiles();for(var t=0;t<l.length;t++)"photo"==l[t].type()&&(e+=this.getDisplayIcon(l[t],t));$("#systemOverlay #display-find-photos .photos .app-list").html(e),$("#systemOverlay #display-home").hide(),$("#systemOverlay #display-find-photos").show(),$("#systemOverlay .app-container .app-list div").bind("mouseover",function(){$("img",this).addClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("mouseout",function(){$("img",this).removeClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("click",function(){r.fileClicked($(this).attr("data-id"))})},this.displayChat=function(){this.hideAll(),$("#systemOverlay #display-home").hide(),$("#systemOverlay #display-chat").show(),$("#systemOverlay .app-container .app-list div").bind("mouseover",function(){$("img",this).addClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("mouseout",function(){$("img",this).removeClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("click",function(){r.fileClicked($(this).attr("data-id"))})},this.displayFindApps=function(){this.hideAll();var e="",t="";l=o.fileSystem.getFiles();for(var i=0;i<l.length;i++)"folder"==l[i].type()?t+=this.getDisplayIcon(l[i],i):e+=this.getDisplayIcon(l[i],i);$("#systemOverlay #display-find-files .folders .app-list").html(t),$("#systemOverlay #display-find-files .files .app-list").html(e),$("#systemOverlay #display-home").hide(),$("#systemOverlay #display-find-files").show(),$("#systemOverlay .app-container .app-list div").bind("mouseover",function(){$("img",this).addClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("mouseout",function(){$("img",this).removeClass("hover")}),$("#systemOverlay .app-container .app-list div").bind("click",function(){r.fileClicked($(this).attr("data-id"))})},this.fileClicked=function(e){var t=l[e];switch(t.type()){case"folder":r.closeOverlay(),o.fileSystem.reset(!o.fileSystem.isMinified()),o.fileSystem.updateDir(t.location()+"/"+t.name()),o.fileSystem.open();break;case"photo":r.openPreview(t.id());break;case"video":r.closeOverlay(),o.moviePlayerSystem.open(),o.moviePlayerSystem.addVideo();break;default:r.closeOverlay(),o.errorMessage.open()}},this.openPreview=function(e){console.log(e);var t=o.fileLibrary[e],i='<img src="'+t.url()+'" width="400" />',s=t.name()+".jpg",n=s.length>23?s.substring(0,23)+"...":s,a='<p class="filename">'+n+"</p>",l='<p class="date">'+t.date()+"</p>",d='<p class="type">Format: JPEG image</p>',c='<p class="size">Size: '+t.size()+"</p>";$("#systemOverlay #preview .image").html(i),$("#systemOverlay #preview .info").html(a+l+d+c),r.hideAll(),r.centerPreview(),$("#systemOverlay #preview .email").bind("click",function(e){r.closePreview(),r.closeOverlay(),o.errorMessage.open()}),$("#systemOverlay #preview .showInFolder").bind("click",function(e){r.closeOverlay(),r.closeOverlay(),o.errorMessage.open()}),$("#systemOverlay #preview .open").bind("click",function(e){r.closeOverlay(),o.shotwellSystem.selectImage(t.id()),o.shotwellSystem.open()}),$("#systemOverlay #preview").show()},this.closePreview=function(){$("#systemOverlay #preview").hide()},this.centerPreview=function(){var e=$(document).width()/2-$("#systemOverlay #preview").width()/2,t=Math.max(24,$(document).height()/2-$("#systemOverlay #preview").height()/2);$("#systemOverlay #preview").css("left",e),$("#systemOverlay #preview").css("top",t+"px"),$("css3-container").length>0&&($("#systemOverlay #preview").prev().css("top",$("#systemOverlay #preview").css("top")),$("#systemOverlay #preview").prev().css("left",$("#systemOverlay #preview").css("left")))},this.appClicked=function(e,t){r.closeOverlay();var i=e.substring(e.lastIndexOf("/")+1,e.length-4);if(t)i=i.replace("logo-",""),"world-of-goo"==i&&(i="worldofgoo"),o.softwareSystem.open(i);else switch(i){case"shotwell":o.systemMenu.handleMenuClick("shotwell");break;case"thunderbird":o.systemMenu.handleMenuClick("email");break;case"firefox":o.systemMenu.handleMenuClick("firefox");break;case"movieplayer":o.moviePlayerSystem.open();break;default:o.errorMessage.open()}},this.reset=function(){$("#systemOverlay input").val(_search_),$("#systemOverlay input").css("font-style","italic"),$("#systemOverlay input").css("color","#aaa"),this.hideAll(),$("#systemOverlay #display-home").show(),$("#systemOverlay #dash-bottom-bar .bottom-wrapper div").removeClass("active"),$("#systemOverlay #dash-bottom-bar .bottom-wrapper .home-icon").addClass("active")},this.hide=function(){o.unblurWindows(),$("#systemOverlay").hide(),r.reset()},this.openOverlay=function(){$("#top").addClass("dashOpen"),$("#menu").addClass("dashOpen"),$("#top").removeClass("dropShadow"),a=!0,this.reset(),this.displayHome(),$("#top #top-button-bg").addClass("open"),$("#systemOverlay").fadeTo(300,1,o.blurWindows),$("#systemOverlay input").focus()},this.closeOverlay=function(){$("#top").removeClass("dashOpen"),$("#menu").removeClass("dashOpen"),$("#top").addClass("dropShadow"),a=!1,$("#top #top-button-bg").removeClass("open"),$("#systemOverlay").fadeTo(300,0,function(){r.hide()}),$("#systemOverlay .app-container .app-list div").unbind("mouseover"),$("#systemOverlay .app-container .app-list div").unbind("mouseout"),$("#systemOverlay .app-container .app-list div").unbind("click"),$("#menu .dash .selected-window-arrow").hide(),$("#menu ."+o.systemMenu.getSelectedMenu()+" .selected-window-arrow").show()},this.resize=function(){$("#systemOverlay  .bottom-wrapper").css("left",$("#dash-bottom-bar").width()/2-$("#dash-bottom-bar .bottom-wrapper").width()/2),$("#systemOverlay").css("height",$(document).height()),$("#systemOverlay input").css("width",$("#dash-bottom-bar").width()-250)}}function SystemMenu(e){var t,i=e,s=this,n=!1;this.init=function(){$("#menu ul li").mouseover(function(){$("#tooltip-text").text($(this).text()),$("#tooltip").css("top",$(this).position().top+$("#menu ul").position().top+45),$("#tooltip").show()}),$("#menu ul li").click(function(){var e=$(this).attr("class").replace(" bottom","");e=e.replace(" temp","").replace(" glow",""),s.handleMenuClick(e)}),$("#menu ul li").mouseout(function(){$("#tooltip").hide()}),this.resize()},this.resize=function(){var e=$(window).height()-24;$("#menu").css("height",e),this.scrollCheck()},this.scrollCheck=function(){var e=0;$.each($("#menu ul li"),function(){$(this).is(":visible")&&(e+=$(this).height()+8)}),$("#menu ul").height()<e?n||(this.addScrolling(),$("#menu .rubbish").removeClass("bottom")):n&&(this.removeScrolling(),$("#menu .rubbish").addClass("bottom"))},this.addScrolling=function(){n=!0,$("#menu").append('<div class="scroll-up"></div><div class="scroll-down"></div>'),$("#menu .scroll-up").bind("mouseover",function(){scrollingUp=!0,scrollUp()}),$("#menu .scroll-down").bind("mouseover",function(){scrollingDown=!0,scrollDown()}),$("#menu .scroll-up").bind("mouseout",function(){s.stopScrolling()}),$("#menu .scroll-down").bind("mouseout",function(){s.stopScrolling()}),$("#menu").bind("mouseleave",function(){s.resetScroll()})},this.stopScrolling=function(){clearTimeout(scrollingTimer),scrollingTimer=null},this.removeScrolling=function(){n=!1,$("#menu").unbind("mousemove"),$("#menu").unbind("mouseout"),$("#menu .scroll-up").remove(),$("#menu .scroll-down").remove(),$("#menu .scroll-up").unbind("mouseover"),$("#menu .scroll-down").unbind("mouseover"),$("#menu .scroll-up").unbind("mouseoout"),$("#menu .scroll-down").unbind("mouseoout")},this.resetScroll=function(){$("#menu ul").css("top","0px")},this.handleMenuClick=function(e){var s=!0;switch("dash"!=e&&(t=e),e){case"dash":$("#menu .selected-window-arrow").hide(),$("#menu .dash .selected-window-arrow").show(),i.systemOverlay.open();break;case"home":var n=$(".folder");n.is(":visible")||(fileSystem.isMinified()?(fileSystem.isMaximised()&&systemSettings.increaseFullscreen(),fileSystem.reset(!1)):fileSystem.reset(!0)),fileSystem.open(),$(".folder ").trigger("mousedown");break;case"firefox":var n=$(".firefox-window");n.is(":visible")||(i.firefoxSystem.open(),i.firefoxSystem.isMaximised()&&i.systemSettings.increaseFullscreen()),$(".firefox-window ").trigger("mousedown");break;case"shotwell":var n=$("#shotwell");n.is(":visible")||(i.shotwellSystem.open(),i.shotwellSystem.isMaximised()&&i.systemSettings.increaseFullscreen()),n.trigger("mousedown");break;case"writer":var n=$("#libreoffice-writer-window");n.is(":visible")||i.libreSystem.open("writer"),n.trigger("mousedown");break;case"impress":var n=$("#libreoffice-impress-window");n.is(":visible")||i.libreSystem.open("impress"),n.trigger("mousedown");break;case"calc":var n=$("#libreoffice-calc-window");n.is(":visible")||i.libreSystem.open("calc"),n.trigger("mousedown");break;case"uone":var n=$("#ubuntuone-window");n.is(":visible")||i.ubuntuOneSystem.open(),$("#ubuntuone-window ").trigger("mousedown");break;case"software":var n=$("#software-centre");n.is(":visible")||i.softwareSystem.open(),n.trigger("mousedown");break;case"email":var n=$(".email-window ");n.is(":visible")||(i.emailSystem.open(),i.emailSystem.isMaximised()&&i.systemSettings.increaseFullscreen()),i.emailSystem.isWriteMinified()?($("#email-write").show(),$("#email-write ").trigger("mousedown")):$(".email-window ").trigger("mousedown");break;case"movieplayer":var n=$("#movieplayer");n.is(":visible")||(moviePlayerSystem.center(),i.moviePlayerSystem.open(),i.moviePlayerSystem.isMaximised()&&i.systemSettings.increaseFullscreen()),$("#movieplayer ").trigger("mousedown");break;case"rubbish":var n=$(".folder");n.is(":visible")?i.fileSystem.updateDir("/"+_rubbish_bin_folder_):(null==i.fileSystem?(i.fileSystem=new FileSystem(this,"/"+_rubbish_bin_folder_),i.fileSystem.init()):i.fileSystem.updateDir("/"+_rubbish_bin_folder_),$(".folder").show(),$("#menu ul li.home img").show()),i.fileSystem.open(),$(".folder ").trigger("mousedown");break;case"workspace":i.workspaces.isOpen()?i.workspaces.close():i.workspaces.open();break;default:s=!1,i.errorMessage.open()}if(s){$("#menu ul li."+e+" img.open-arrow").show();var o=$("#menu ul li."+e).css("background-image");"dash"!=e&&"rubbish"!=e&&-1==o.indexOf("-active")&&($indexLastSlash=o.lastIndexOf("."),$newBackgroundLink=o.substr(0,$indexLastSlash)+"-active.png",$("#menu ul li."+e).css("background-image",$newBackgroundLink).css("display"," list-item"))}},this.getSelectedMenu=function(){return t},this.increaseFullscreen=function(){},this.decreaseFullscreen=function(){},this.wiggle=function(e){$("#menu").css("overflow","visible"),i.noWIndowSelected(),$("#menu ul li."+e).addClass("glow").delay(600).queue(function(e){$(this).removeClass("glow"),e()})},this.closeWindow=function(e){$("#menu ul li."+e+" img").hide();var t=$("#menu ul li."+e).css("background-image");$("#menu ul li."+e).css("background-image",t.replace("-active","")),$("#menu ul li."+e).hasClass("temp")&&$("#menu ul li."+e).hide(),$("#top #top-left #title").text(""),i.guidedTourSystem.setCurrentIndex(-1),this.scrollCheck()},this.openWindow=function(e){$("#menu ul li."+e).hasClass("temp")&&$("#menu ul li."+e).show(),$("#menu ul li."+e+" img").show(),this.scrollCheck()}}function scrollUp(){var e=Math.min(0,$("#menu ul").position().top+5);$("#menu ul").css("top",e+"px"),scrollingTimer=setTimeout("scrollUp()",50)}function scrollDown(){var e=$(window).height()-24-($("#menu ul .rubbish").position().top+$("#menu ul .rubbish").height()+30),t=Math.max(e,Math.min(0,$("#menu ul").position().top-5));$("#menu ul").css("top",t+"px"),scrollingTimer=setTimeout("scrollDown()",50)}function FirefoxSystem(e){function t(e){$("#submitURL ").attr("value",e),$("#firefoxInternet").attr("src",e),i()}function i(){$(".buttons .firefox-back").unbind("click"),$(".buttons .firefox-forward").unbind("click"),l.length<=1?$(".buttons .firefox-back").addClass("inactive"):($(".buttons .firefox-back").removeClass("inactive"),$(".buttons .firefox-back").bind("click",function(){s()})),d.length<=0?$(".buttons .firefox-forward").addClass("inactive"):($(".buttons .firefox-forward").removeClass("inactive"),$(".buttons .firefox-forward").bind("click",function(){n()}))}function s(){d.push(l[l.length-1]),l.pop(),h=$(".firefox-window").height()-($(".firefox-window .control").height()+$(".firefox-window .buttons").height()+12),$(".firefox-window .firefox-internet").css("height",h),u=$(".firefox-window").width()-310,$(".firefox-window .buttons .firefox-url input").css("width",u),_=!0,t(l[l.length-1])}function n(){var e=d[d.length-1];l.push(e),d.pop(),_=!0,t(e)}function o(){h=$(".firefox-window").height()-($(".firefox-window .control").height()+$(".firefox-window .buttons").height()+12),p&&(h-=27),$(".firefox-window .firefox-internet .theIframe").css("height",h),$(".firefox-window .web-overlay-tran").css("height",h),u=$(".firefox-window").width()-310,$(".firefox-window .buttons .firefox-url input").css("width",u)}function r(){var e=$(document).width()/2-$(".firefox-window").width()/2,t=Math.max(24,$(document).height()/2-$(".firefox-window").height()/2);$(".firefox-window").css("left",e),$(".firefox-window").css("top",t)}function a(){_||($("#submitURL").addClass("fade-text"),"..."!=$("#submitURL").val().substr($("#submitURL").val().length-3,3)&&$("#submitURL").val($("#submitURL").val()+"...")),_=!1}var l=new Array,d=new Array,c=e,m=this,h=0,u=0,p=!1,f="http://start.ubuntu.com",_=!0,w=!1;this.init=function(){$(".firefox-window .control .close").click(function(){m.close()}),$(".firefox-window  .control .min").click(function(){p&&c.systemSettings.decreaseFullscreen(),$(".firefox-window ").hide(),c.systemMenu.wiggle("firefox")}),$(".firefox-window .control .max").click(function(){p?(p=!1,$(".firefox-window").removeClass("fullsize"),$(".firefox-window").css("height","600px"),$(".firefox-window").css("width","900px"),$(".firefox-window .web-overlay-tran").css("width","100%"),$(".firefox-window .web-overlay-tran").hide(),c.systemSettings.decreaseFullscreen()):(p=!0,$(".firefox-window").addClass("fullsize"),$(".firefox-window").css("height",$(document).height()+"px"),$(".firefox-window").css("width",$(document).width()-70+"px"),$(".firefox-window .web-overlay-tran").css("width","100px"),$(".firefox-window .web-overlay-tran").show(),c.systemSettings.increaseFullscreen()),o()}),$("#submitURL").keypress(function(e){if(13==e.keyCode){var i=$("#submitURL ").val();"http"!=i.slice(0,4)&&(i="www"!=i.slice(0,3)?"http://www."+i:"http://"+i),_=!0,d=new Array,l.push(i),t(i)}}),$("#submitSearch ").keypress(function(e){if(13==e.keyCode){var i="http://www.wikipedia.org/w/index.php?title=Special%3ASearch&search="+$("#submitSearch ").val().replace(" ","+");d=new Array,l.push(i),_=!0,t(i)}}),this.close=function(){c.openWindows["firefox-window"]=!1,$(".firefox-window ").hide(),p&&c.systemSettings.decreaseFullscreen(),r(),_=!1,t(f),p=!1,$(".firefox-window").removeClass("fullsize"),m.resize(),m.center(),c.systemMenu.closeWindow("firefox")},this.open=function(){r(),$(".firefox-window ").show(),w=!0,$("css3-container").length>0&&($(".firefox-window").prev().css("top",$(".firefox-window").css("top")),$(".firefox-window").prev().css("left",$(".firefox-window").css("left")))},this.isMaximised=function(){return p},this.resize=function(){o()},this.center=function(){r()},$("#submitSearch").focus(function(){"Wikipedia"==$(this).val()&&($(this).val(""),$(this).removeClass("fade-text"))}),$("#submitSearch").blur(function(){""==$(this).val()&&($(this).val("Wikipedia"),$(this).addClass("fade-text"))}),$("#submitURL").focus(function(){"..."==$(this).val().substr($(this).val().length-3,3)&&($(this).removeClass("fade-text"),$(this).val($(this).val().substr(0,$(this).val().length-3)))}),$("#firefoxInternet").load(function(){a()}),o(),r(),l.push(f),t(f)}}function EmailSystem(e){var t=new Array,i=e,s=this,n=!1,o=!1,r=!1,a=!1,l="inbox",d=0,c=-1,m=0,h=!1,u=new Array,p=new Array,f=null,_=null,w="";this.init=function(){t.push(new Email(0,"inbox",$.trim(_email_1_title_),$.trim(_email_1_body_),"Inayaili de Leon",$.trim(_you_))),t.push(new Email(1,"inbox",$.trim(_email_2_title_),$.trim(_email_2_body_),"John Oxton",$.trim(_you_))),t.push(new Email(2,"inbox",$.trim(_email_3_title_),$.trim(_email_3_body_),"Ellen Arnold",$.trim(_you_))),t.push(new Email(3,"inbox",$.trim(_email_4_title_),$.trim(_email_4_body_),"Steve Edwards",$.trim(_you_))),t.push(new Email(4,"inbox",$.trim(_email_5_title_),$.trim(_email_5_body_),"Anthony Dillon",$.trim(_you_))),u.push(_random_reply_),p.push(new Email(t.length,"inbox","Hiya there again","Just checking how you are? Been along time...\n\nRegards,\nJoe","Joe Bloggs <joe@bloggs.com>")),p.push(new Email(t.length,"inbox","Hiya there again","Great ... Sounds good! Lets meet for lunch tomorrow to talk it over! What you think?\n\nThanks,\nSue","Sue  White <suewhite@googlemail.com>")),p.push(new Email(t.length,"inbox","Hiya there again","Did you catch the game last night! What a goal... fancy coming over next time?","Jack Smith <j_swan@gmail.com>")),p.push(new Email(t.length,"inbox","Hiya there again","Ok, ill do my best but no promises. It will take some time so let you know when its done./\n/\nThanks,/\nPaul","Paul Swan <paul@hotmail.com>")),this.setupControl(),$("#write-from input").val($.trim(_you_))},this.setupControl=function(){this.resetMessage(),$("#email-write #write-send").bind("click",function(){s.sendEmail()}),$("#email-write #write-subject input[name=subject]").keyup(function(){var e=$(this).val();""!=e?$("#email-write  .window-title").text(_write_+": "+e):$("#email-write  .window-title").text(_write_+": ("+_no_subject_+")")}),$("#email-write input").focus(function(){$(this).css("border-color","#dd4814")}),$("#email-write input").blur(function(){$(this).css("border-color","#ADA9A5")}),$("#email-write .control .close").click(function(){s.closeWrite()}),$("#email-write .control .min").click(function(){$("#email-write").hide(),a&&i.systemSettings.decreaseFullscreen(),i.systemMenu.wiggle("email"),o=!0}),$("#email-write .control .max").click(function(){a?(a=!1,$("#email-write").css("width","900px"),$("#email-write").css("height","610px"),$("#email-write").removeClass("fullsize"),i.systemSettings.decreaseFullscreen()):(a=!0,$("#email-write").css("width",$(document).width()-70+"px"),$("#email-write").css("height",$(document).height()+"px"),$("#email-write").addClass("fullsize"),i.systemSettings.increaseFullscreen()),s.resizeMessage()}),$(".email-window .control .close").click(function(){s.close()}),$(".email-window .control .min").click(function(){$(".email-window").hide(),r&&i.systemSettings.decreaseFullscreen(),i.systemMenu.wiggle("email"),n=!0}),$(".email-window .control .max").click(function(){r?(r=!1,$(".email-window").css("width","900px"),$(".email-window").css("height","600px"),$(".email-window").removeClass("fullsize"),i.systemSettings.decreaseFullscreen()):(r=!0,$(".email-window").css("width",$(document).width()-70+"px"),$(".email-window").css("height",$(document).height()+"px"),$(".email-window").addClass("fullsize"),i.systemSettings.increaseFullscreen()),s.resize()}),$(".email-content .folder-list .list div").click(function(){$(".email-window .folder-list .list div").removeClass("selected"),$(this).addClass("selected"),s.setFolder($(this).attr("id").split("-")[1])}),$(".email-window .buttons .email-write").bind("click",function(e){s.showWrite()}),$(".email-window .buttons .email-get-mail").bind("click",function(e){s.updateDisplay()}),$(".message-header .email-buttons span.message-delete").bind("click",function(e){-1!=c&&("trash"!=t[c].folder()?t[c].setFolder("trash"):t[c].setDeleted(!0),c=-1,s.updateDisplay(),s.updateMessage())}),$(".message-header .email-buttons span.message-archive").bind("click",function(e){-1!=c&&(t[c].setFolder("archive"),c=-1,s.updateDisplay(),s.updateMessage())}),$(".message-header .email-buttons span.message-junk").bind("click",function(e){-1!=c&&(t[c].fire()?t[c].setFire(!1):t[c].setFire(!0),s.updateDisplay(),s.updateMessage())}),$(".message-header .email-buttons span.message-forward").bind("click",function(e){s.showWrite("forward")}),$(".message-header .email-buttons span.message-reply").bind("click",function(e){"sent"==l?s.showWrite("sentreply"):s.showWrite("reply")}),$(".not-junk").bind("click",function(e){-1!=c&&(t[c].setFire(!1),s.updateDisplay(),s.updateMessage())}),this.updateDisplay(),this.updateMessage()},this.setupRandomEmail=function(){var e=Math.floor(Math.random()*p.length);f=p[e];var t=1e4*Math.random()+2e3;setTimeout("recieveMessage()",t)},this.showWrite=function(e){if(-1!=c){_=t[c],w=e;var i=$.trim(_.subject());"Re:"!=i.substr(0,3)&&(i="Re: "+$.trim(i)),"reply"==w?($("#email-write  .window-title").text(_write_+": "+i),$("#email-write  #write-from  input[name=from]").val($.trim(_you_)),$("#email-write  #write-subject  input[name=subject]").val(i),$("#email-write  #write-to  input[name=to]").val(_.from()),$("#email-write #write-body textarea[name=body]").val("\n\n"+$.trim(_on_)+" "+$.trim(_.date())+", "+$.trim(_.from())+" "+$.trim(_wrote_)+": \n\n"+$.trim(_.body()))):"forward"==w?($("#email-write  .window-title").text($.trim(_write_)+": Fwd: "+$.trim(_.subject())),$("#email-write  #write-subject  input[name=subject]").val($.trim(_fwd_)+": "+$.trim(_.subject())),$("#email-write  #write-to  input[name=to]").val(""),$("#email-write #write-body textarea[name=body]").val("\n\n-------- "+$.trim(_original_message_)+" --------\n\n"+$.trim(_.body()))):"sentreply"==w&&($("#email-write  .window-title").text($.trim(_write_)+": "+$.trim(i)),$("#email-write  #write-from  input[name=from]").val($.trim(_you_)),$("#email-write  #write-subject  input[name=subject]").val($.trim(i)),$("#email-write  #write-to  input[name=to]").val($.trim(_.to())),$("#email-write #write-body textarea[name=body]").val("\n\n"+$.trim(_on_)+" "+$.trim(_.date())+", "+$.trim(_.from())+" "+$.trim(_wrote_)+": \n\n"+$.trim(_.body())))}$("#email-write").show(),$("#email-write").css("z-index",3),$("#email-write").trigger("mousedown"),$("css3-container").length>0&&($("#email-write").prev().css("top",$("#email-write").css("top")),$("#email-write").prev().css("left",$("#email-write").css("left")))},this.closeWrite=function(){i.openWindows["email-write"]=!1,this.resetMessage(),$("#email-write").hide()},this.isMaximised=function(){return r},this.isWriteMaximised=function(){return a},this.isWriteMinified=function(){return o},this.open=function(){h=!0,this.center(),$(".email-window").show(),i.systemMenu.openWindow("email")},this.close=function(){h&&(h=!1,i.openWindows["email-window"]=!1,$(".email-window").hide(),$("#email-write").hide(),r&&i.systemSettings.decreaseFullscreen(),i.systemMenu.closeWindow("email"),$(".email-window").removeClass("fullsize"),a=o=r=r=!1,$("#folder-inbox").trigger("click"),this.resize(),this.center())},this.updateDisplay=function(){d=m=0,emailLIstContents="";for(var e="",n=t.length;n--;)t[n].read()||i.systemSettings.gotMail(!0),t[n].folder()!=l||t[n].deleted()||(e+=t[n].draw(n),d++,t[n].read()||m++);this.checkMessageNotification(),$(".email-window .email-list").html(e),$(".email-window .email-list .message:even").addClass("grey"),-1!=c&&$(".email-window .email-list #email-"+c).addClass("selected"),$(".email-list div").bind("click",function(){c=$(this).attr("id").split("-")[1],t[c].setRead(!0),$(".email-list div").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("unread")&&(m--,s.checkMessageNotification()),$(this).removeClass("unread"),s.updateMessage(),s.updateDetails()}),$(".email-list div li.message-star").bind("click",function(e){e.stopPropagation(),c=$(this).parent().parent().attr("id").split("-")[1],t[c].starred()?(t[c].setStarred(!1),$(this).parent().parent().removeClass("starred")):(t[c].setStarred(!0),$(this).parent().parent().addClass("starred"))}),$(".email-list div li.message-fire").bind("click",function(e){e.stopPropagation();var i=$(this).parent().parent().attr("id").split("-")[1];t[i].fire()?(t[i].setFire(!1),$(this).parent().parent().removeClass("fire")):(t[i].setFire(!0),$(this).parent().parent().addClass("fire")),s.updateMessage()}),$(".email-list div li.message-glasses").bind("click",function(e){e.stopPropagation(),c=$(this).parent().parent().attr("id").split("-")[1],t[c].read()?(t[c].setRead(!1),$(this).parent().parent().addClass("unread"),m++):(t[c].setRead(!0),$(this).parent().parent().removeClass("unread"),m--),s.updateDetails()})},this.checkMessageNotification=function(){m>0?i.systemSettings.gotMail(!0):i.systemSettings.gotMail(!1)},this.updateMessage=function(){if(-1!=c){var e=t[c].body();e=e.replace(/\n/g,"<br/>"),$(".email-window .email-contents .message-body").html(e),$(".email-window .email-contents .email-body .message-header .from dd").html(t[c].from()),$(".email-window .email-contents .email-body .message-header .subject dd").html(t[c].subject()),$(".email-window .email-contents .email-body .message-header .to dd").html(t[c].to()),$(".email-window .email-contents .email-body .message-header .date").html(t[c].date()),t[c].cc()?$(".email-window .email-contents .email-body .message-header .cc dd").html(t[c].cc()):$(".email-window .email-contents .email-body .message-header .cc").hide(),$(".email-window .email-contents .email-body div").show();var i=$(".email-window .email-contents .email-body").height()-($(".email-window .email-contents .email-body .message-header").height()+21);t[c].fire()?(i-=39,$(".message-header .email-buttons span.message-junk").hide(),$(".email-window .email-contents .junk-mail-banner ").show()):($(".message-header .email-buttons span.message-junk").show(),$(".email-window .email-contents .junk-mail-banner ").hide()),i+="px",$(".email-window .email-contents .message-body").css("height",i)}else $(".email-window .email-contents .email-body div").hide();this.updateDetails()},this.setFolder=function(e){l=e,c=-1,"sent"==l?$(".email-window .email-content .email-contents .email-categories .from").text(_recipient_):$(".email-window .email-content .email-contents .email-categories .from").text(_from_),this.updateDisplay(),this.updateMessage()},this.resize=function(){var e=$(".email-window").width()-188,t=$(".email-window").height()-130;$(".email-window .email-content .email-contents").css("width",e),$(".email-window .email-content .folder-list .list").css("height",t),$(".email-window .email-content .email-contents .email-list").css("height",t/2-3),$(".email-window .email-content .email-contents .email-body").css("height",t/2-3),this.updateMessage()},this.resizeMessage=function(){var e=$("#email-write").width()-6,t=$("#email-write").height()-250;$("#email-write #write-body textarea").css("width",e),$("#email-write #write-body textarea").css("height",t)},this.updateDetails=function(){$(".email-window .email-content .emails-info #details-unread").text(m),$(".email-window .email-content .emails-info #details-total").text(d)},this.resetMessage=function(){$("#email-write").hide(),$("#email-write  .window-title").text(_write_+": ("+_no_subject_+")"),$("#email-write  #write-subject  input[name=subject]").val(""),$("#email-write  #write-to  input[name=to]").val(""),$("#email-write #write-body textarea[name=body]").val(""),$("#email-write .loading-bar .progress").css("width","0")},this.sendEmail=function(){var e=s.safeValue($("#email-write #write-subject input[name=subject]").val()),i=s.safeValue($("#email-write #write-body textarea[name=body]").val()),n=_you_,o=s.safeValue($("#email-write #write-to input[name=to]").val()),r=new Date,a=r.getMinutes(),l=r.getDate(),d=r.getMonth(),c=""+r.getFullYear();
c=c.substr(2,2),10>a&&(a="0"+a),10>l&&(l="0"+l),10>d&&(d="0"+d),10>a&&(a="0"+a),r=l+"/"+d+"/"+c+" "+r.getHours()+":"+a+" ";var m=new Email(t.length,"sent",e,i,n,o,r);t.push(m),"reply"==w?_.setReplied(!0):"forward"==w&&_.setForwarded(!0),$("#email-write .loading-bar .progress").animate({width:96},500,function(){s.resetMessage(),s.updateDisplay(),s.setupRandomReply(m)})},this.safeValue=function(e){var t=/</g,i=/>/g,s=/'/g,n=/"/g;return e=e.toString().replace(t,"&lt;").replace(i,"&gt;").replace(s,"&#39;").replace(n,"&#34;")},this.setupRandomReply=function(e){var i=Math.floor(Math.random()*u.length),s=u[i]+"\n\n"+$.trim(_on_)+" "+$.trim(e.date())+", "+$.trim(e.from())+" "+$.trim(_fwd_)+" "+$.trim(_wrote_)+": \n\n"+e.body(),n=e.subject();"Re:"!=n.substr(0,3)&&(n="Re: "+n),t.push(new Email(t.length,"inbox",n,s,e.to(),_you_));var o=2e3*Math.random()+2e3;setTimeout("recieveMessage()",o)},this.center=function(){var e=$(document).width()/2-$(".email-window").width()/2,t=Math.max(24,$(document).height()/2-$(".email-window").height()/2);$(".email-window").css("left",e),$(".email-window").css("top",t+"px"),$("css3-container").length>0&&($(".email-window").prev().css("top",$(".email-window").css("top")),$(".email-window").prev().css("left",$(".email-window").css("left")))}}function recieveMessage(){emailSystem.updateDisplay()}function SystemSettings(e){var t,i,s,n,o,r,a,l,d,c,m,h,u,p;this.init=function(){t=e,i=this,s=new Date,n=30,o=!0,r=!1,a=0,l=!1,d="Ubuntu Play",c=!1,m=!1,h=9,u=setInterval(function(){i.updateClock()},1e3),p=s.getMinutes(),this.setClock(),this.setSystem()},this.setSystem=function(){},this.gotMail=function(e){m=e,e&&"../img/top/nomessage.jpg"==$("#top #top-right #message .message-logo").attr("src")?$("#top #top-right #message .message-logo").attr("src","../img/top/gotmessage.jpg"):e||"../img/top/gotmessage.jpg"!=$("#top #top-right #message .message-logo").attr("src")||$("#top #top-right #message .message-logo").attr("src","../img/top/nomessage.jpg")},this.setGuidedTour=function(e){l=e},this.setDate=function(e){s=e},this.setVolume=function(e){n=e},this.setMute=function(e){c=e},this.setActiveIcons=function(e){h=e},this.setBluetooth=function(e){o=e,o?($("#top #top-right #bluetooth ul li.bluetooth").text(_turn_on_bluetooth_),$("#top #top-right #bluetooth img").removeClass("disabled"),$("#top #top-right #bluetooth ul li.BtOn").show()):($("#top #top-right #bluetooth ul li.bluetooth").text(_turn_off_bluetooth_),$("#top #top-right #bluetooth img").addClass("disabled"),$("#top #top-right #bluetooth ul li.BtOn").hide())},this.increaseFullscreen=function(){a++,t.topShadow(!1)},this.decreaseFullscreen=function(){a--,0>=a&&(t.topShadow(!0),t.noWIndowSelected())},this.setBluetoothVisible=function(e){r=e},this.updateTime=function(){s.setMinutes(s.getMinutes()+1),this.setClock()},this.setClock=function(){var e=s.getHours(),t=s.getMinutes();10>t&&(t="0"+t),10>e&&(e="0"+e),$("#time p").text(e+":"+t+" ")},this.updateClock=function(){p!=(new Date).getMinutes()&&(clearInterval(u),this.updateTime(),setInterval(function(){i.updateTime()},6e4))},this.onGuidedTour=function(){return l},this.date=function(){return s},this.fullscreenCount=function(){return a},this.volume=function(){return n},this.bluetooth=function(){return o},this.bluetoothVisible=function(){return r},this.mute=function(){return c},this.mail=function(){return m}}function Email(e,t,i,s,n,o,r,a){if(void 0==i&&(i="Untitled Message"),void 0==n&&(n="Welcome <welcome@ubuntu.com>"),void 0==o&&(o="Me <me@canonical.com>"),void 0==a&&(a=!1),void 0==s&&(s="There is no body for message "+i),void 0==r){var l=new Date,d=l.getMinutes(),c=l.getDate(),m=l.getMonth()+1,h=""+l.getFullYear();h=h.substr(2,2),10>d&&(d="0"+d),10>c&&(c="0"+c),10>m&&(m="0"+m),10>d&&(d="0"+d),r=c+"/"+m+"/"+h+" "+l.getHours()+":"+d+" "}var u=e,p=r,f=i,_=n,w=o,$=a,g=!1,y=!1,b=!1,v=!1,x=!1,k=!1,S=t,C=s,O=!1;"sent"==S&&(x=!0),this.subject=function(){return f},this.date=function(){return p},this.from=function(){return _},this.to=function(){return w},this.cc=function(){return $},this.replied=function(){return g},this.attachment=function(){return b},this.starred=function(){return v},this.read=function(){return x},this.folder=function(){return S},this.fire=function(){return k},this.body=function(){return C},this.deleted=function(){return O},this.forwarded=function(){return y},this.setReplied=function(e){g=e},this.setAttachment=function(e){b=e},this.setStarred=function(e){v=e},this.setRead=function(e){x=e},this.setFolder=function(e){S=e},this.setFire=function(e){k=e},this.setDeleted=function(e){O=e},this.setForwarded=function(e){y=e},this.draw=function(){var e='class="message ';return x||(e+="unread "),b&&(e+="attachment "),v&&(e+="starred "),k&&(e+="fire "),g&&y?e+="repliedforwarded ":(g&&(e+="replied "),y&&(e+="forwarded ")),e+='"',"sent"==S?'<div id="email-'+u+'" '+e+'><ul><li class="message-t"></li><li class="message-star"></li><li class="message-clip"></il><li class="message-subject">'+f+'</li><li class="message-glasses"></li><li class="message-from">'+w+'</li><li class="message-fire"></li><li class="message-date">'+p+"</li></div>":'<div id="email-'+u+'" '+e+'><ul><li class="message-t"></li><li class="message-star"></li><li class="message-clip"></il><li class="message-subject">'+f+'</li><li class="message-glasses"></li><li class="message-from">'+_+'</li><li class="message-fire"></li><li class="message-date">'+p+"</li></div>"},this.toString=function(){return"ID = "+u+" | Subject = "+f}}function ErrorMessage(e){var t=this;this.init=function(){$(".error-window  .control .close").bind("click",function(){t.close()}),$(".error-window .content .error-buttons div").bind("click",function(){var e=$(this).attr("class").replace(" highlight","");switch(e){case"continue":t.continueClicked();break;case"download":t.downloadClicked()}}),this.center()},this.continueClicked=function(){this.close()},this.downloadClicked=function(){window.open("http://www.ubuntu.com/download/ubuntu/download")},this.open=function(){this.resize(),$(".error-window").show(),$(".error-window ").trigger("mousedown"),$("body").append('<div class="fullscreenErrorTransOverlay"></div>'),$(".fullscreenErrorTransOverlay").bind("click",function(){t.close()}),$("css3-container").length>0&&($(".error-window").prev().css("top",$(".error-window").css("top")),$(".error-window").prev().css("left",$(".error-window").css("left")))},this.close=function(){$(".error-window").is(":visible")&&($(".fullscreenErrorTransOverlay").unbind("click"),$(".fullscreenErrorTransOverlay").remove(),$(".error-window").hide(),this.center())},this.resize=function(){var e=$(document).width()/2-$(".error-window").width()/2,t=$(document).height()/2-$(".error-window").height()/2;$(".error-window").css("left",e),$(".error-window").css("top",t)},this.center=function(){var e=$(document).width()/2-$(".error-window").width()/2,t=$(document).height()/2-$(".error-window").height()/2;$(".error-window").css("left",e),$(".error-window").css("top",t)}}function UbuntuOneSystem(e){var t=!1,i=e,s=this;this.init=function(){$("#ubuntuone-window").hide(),$("#ubuntuone-window .control .close").bind("click",function(){s.close()}),$("#ubuntuone-window .content .body .ubuntuone-buttons .join-now").bind("click",function(){s.openUbuntu1Page()}),$("#ubuntuone-window .content .body .ubuntuone-buttons .learn-more").bind("click",function(){s.openUbuntu1Page()}),$("#ubuntuone-window .content .body .ubuntuone-buttons .have-account").bind("click",function(){s.openUbuntu1Page()})},this.open=function(){this.center(),$("#ubuntuone-window ").show(),t=!0,$("css3-container").length>0&&($("#ubuntuone-window").prev().css("top",$("#ubuntuone-window").css("top")),$("#ubuntuone-window").prev().css("left",$("#ubuntuone-window").css("left")))},this.openUbuntu1Page=function(){window.open("http://one.ubuntu.com")},this.close=function(){t&&(i.openWindows["ubuntuone-window"]=!1,$("#ubuntuone-window .control .close").unbind("click"),$("#ubuntuone-window").hide(),i.systemMenu.closeWindow("uone"),t=!1)},this.isOpen=function(){return t},this.resize=function(){this.center()},this.center=function(){var e=$(document).width()/2-$("#ubuntuone-window ").width()/2,t=Math.max(24,$(document).height()/2-$("#ubuntuone-window ").height()/2);$("#ubuntuone-window ").css("left",e),$("#ubuntuone-window ").css("top",t)}}function File(e,t,i,s,n,o,r){if(void 0==s){var a=d.split("/");s=a[a.length-1].split(".")[0]}void 0==n&&(n="11.5MB"),void 0==o&&(o=(new Date).toString()),void 0==r&&(r="/Home"),void 0==i&&(i="photo");var l=e,d=t,c=i,m=s,h=n,u=o,p=r;this.url=function(){return d},this.name=function(){return m},this.size=function(){return h},this.date=function(){return u},this.location=function(){return p},this.id=function(){return l},this.type=function(){return c},this.setURL=function(e){d=e},this.setName=function(e){m=e},this.setSize=function(e){h=e},this.setDate=function(e){u=e},this.setLocation=function(e){p=e},this.setType=function(e){c=e},this.drawIcon=function(e,t){switch(c){case"photo":return"display-icon"==t?'<div class="file '+t+'" data-type="photo"  data-id='+e+'><p class="border"><img src="'+d+'"  width="53px"  /></p><span>'+m+"</span></div>":'<div class="file '+t+'" data-type="photo"  data-id='+e+"><p></p><span>"+m+"</span></div>";case"video":var i=d.split("/");return i=i[i.length-1].split(".")[0],"display-icon"==t?'<div class="file '+t+'"  data-type="video"  data-id='+e+'><p class="border"><img src="../img/videos/'+i+'.jpg"  width="53px"  /></p><span>'+m+"</span></div>":'<div class="file '+t+'"  data-type="video"  data-id='+e+"><p></p><span>"+m+"</span></div>";case"audio":return"display-icon"==t?'<div class="file '+t+'" data-type="audio"  data-id='+e+'><p><img src="../img/folder/audio.png" /></p><span>'+m+"</span></div>":'<div class="file '+t+'" data-type="audio"  data-id='+e+"><p></p><span>"+m+"</span></div>";default:return"display-icon"==t?'<div class="file '+t+'" data-type="unknown"  data-id='+e+'><p><img src="../img/folder/unknown.png" /></p><span>'+m+"</span></div>":'<div class="file '+t+'" data-type="unknown"  data-id='+e+"><p></p><span>"+m+"</span></div>"}}}function ShotwellSystem(e){var t=e,i=this,s=!1,n=!1,o=0,r=72,a=360,l=0,d=.3,c=0;this.init=function(){l=Math.floor($("#shotwell .container .images").width()/158),o=t.fileLibrary.length-2,this.setupControl()},this.setupControl=function(){$("#shotwell  .control .close").click(function(){i.close()}),$("#shotwell  .control .min").click(function(){i.min()}),$("#shotwell  .control .max").click(function(){n?(n=!1,$("#shotwell").css("width","800px"),$("#shotwell").css("height","550px"),$("#shotwell ").removeClass("fullsize"),t.systemSettings.decreaseFullscreen()):(n=!0,$("#shotwell").css("width",$(document).width()-70+"px"),$("#shotwell").css("height",$(document).height()+"px"),$("#shotwell ").addClass("fullsize"),t.systemSettings.increaseFullscreen()),i.resize()}),$("#shotwell .nav ul").click(function(){$(this).addClass("selected"),$("#shotwell .container .images").removeClass("singleImage"),$("#shotwell .container .tools .jump-image").hide(),$("#shotwell .container .tools .slider-container").show(),$("#shotwell .sidebar .details .overall").show(),$("#shotwell .sidebar .details .single").hide(),i.display(),i.sliderUpdate(d)}),$("#shotwell .container .tools .jump-image .next").bind("click",function(){$(this).hasClass("disabled")||(c++,i.updateImageDetails(c),i.display(c),i.checkNextPrev())}),$("#shotwell .container .tools .jump-image .prev").bind("click",function(){$(this).hasClass("disabled")||(c--,i.updateImageDetails(c),i.display(c),i.checkNextPrev())}),$("#shotwell .container .tools .slider-container .slider").slider({min:0,max:100,step:1,value:30,slide:function(e,t){i.getSliderValueAndUpdate($(this))},change:function(e,t){i.getSliderValueAndUpdate($(this))}}),$("#shotwell .container .images").click(function(){$("#shotwell .nav ul").removeClass("selected"),$("#shotwell .container .images img").removeClass("selected"),$("#shotwell .sidebar .details .overall").show(),$("#shotwell .sidebar .details .single").hide()}),$("#shotwell .sidebar .details .single").hide(),$("#shotwell .container .tools .jump-image").hide(),this.display(),this.sliderUpdate(d,1),this.center()},this.getSliderValueAndUpdate=function(e){var t=e.slider("option","value")/100;i.sliderUpdate(t)},this.checkNextPrev=function(){$("#shotwell .container .tools .jump-image div").removeClass("disabled"),0>=c&&$("#shotwell .container .tools .jump-image .prev").addClass("disabled"),c>=o-1&&$("#shotwell .container .tools .jump-image .next").addClass("disabled")},this.sliderUpdate=function(e,t){var i=$("#shotwell .container .images").width()-15,s=$("#shotwell .container .tools .slider-container .slider .ui-slider-handle").position();void 0!=t&&(s="60.45px; "),$("#shotwell .container .tools .slider-container .slider-active").css("width",s.left);var n=Math.floor((a-r)*e+r)-5;$("#shotwell .container .images img").css("width",n),l=Math.min(o,Math.floor(i/n));var d=Math.floor(i/l);$("#shotwell .container .images div").css("width",d+"px")},this.display=function(e){var s="";if(void 0==e)for(var n=0;o>n;n++)"photo"==t.fileLibrary[n].type()&&(s+='<div><img src="'+t.fileLibrary[n].url()+'" alt="'+t.fileLibrary[n].name()+'" id="'+n+'"  /></div>');else s+='<div class="large"><img src="'+t.fileLibrary[e].url()+'" alt="'+t.fileLibrary[e].name()+'"  id="-1"  /></div>';$("#shotwell .container .images").html(s),$("#shotwell .container .images img").click(function(e){e.stopPropagation(),$("#shotwell .container .images img").removeClass("selected"),$(this).addClass("selected"),$("#shotwell .sidebar .details .overall").hide(),$("#shotwell .sidebar .details .single").show(),$("#shotwell .sidebar .details .title").text(t.fileLibrary[$(this).attr("id")].name()),$("#shotwell .sidebar .details .date").text(t.fileLibrary[$(this).attr("id")].date()),$("#shotwell .sidebar .details .size").text(t.fileLibrary[$(this).attr("id")].size())}),$("#shotwell .container .images img").dblclick(function(){$("#shotwell .container .images").addClass("singleImage"),$("#shotwell .container .tools .jump-image").show(),$("#shotwell .container .tools .slider-container").hide(),c=$(this).attr("id"),i.display(c),i.checkNextPrev()}),this.resize()},this.showImageDetails=function(e){this.updateImageDetails(e),$("#shotwell .sidebar .details .overall").hide(),$("#shotwell .sidebar .details .single").show()},this.updateImageDetails=function(e){$("#shotwell .sidebar .details .title").text(t.fileLibrary[e].name()),$("#shotwell .sidebar .details .date").text(t.fileLibrary[e].date()),$("#shotwell .sidebar .details .size").text(t.fileLibrary[e].size())},this.selectImage=function(e){$("#shotwell .container .images").addClass("singleImage"),$("#shotwell .container .tools .jump-image").show(),$("#shotwell .container .tools .slider-container").hide(),c=e,this.showImageDetails(c),i.display(c),i.checkNextPrev(),$("#shotwell").show(),s=!0,this.resize(),t.systemMenu.openWindow("shotwell"),$("#shotwell").trigger("mousedown")},this.open=function(){this.resize(),this.center(),$("#shotwell").show(),s=!0,t.systemMenu.openWindow("shotwell"),$("css3-container").length>0&&($("#shotwell").prev().css("top",$("#shotwell").css("top")),$("#shotwell").prev().css("left",$("#shotwell").css("left")))},this.close=function(){s&&(t.openWindows.shotwell=!1,$("#shotwell .container .images").removeClass("singleImage"),$("#shotwell .container .tools .jump-image").hide(),$("#shotwell .container .tools .slider-container").show(),$("#shotwell .sidebar .details .overall").show(),$("#shotwell .sidebar .details .single").hide(),i.display(),i.sliderUpdate(d),n&&t.systemSettings.decreaseFullscreen(),$("#shotwell ").hide(),t.systemMenu.closeWindow("shotwell"),$("#shotwell ").removeClass("fullsize"),i.resize(),minified=s=!1,i.center())},this.min=function(){n&&t.systemSettings.decreaseFullscreen(),$("#shotwell ").hide(),t.systemMenu.wiggle("shotwell"),minified=!0},this.isMaximised=function(){return n},this.resize=function(){var e=$("#shotwell").width()-228;$("#shotwell .container").css("width",e);var t=$("#shotwell").height()-33;$("#shotwell .container").css("height",t),$("#shotwell .sidebar .nav").css("height",t-138),$("#shotwell .container .images").css("height",t-40)},this.center=function(){var e=$(document).width()/2-$("#shotwell").width()/2,t=Math.max(24,$(document).height()/2-$("#shotwell").height()/2);$("#shotwell").css("left",e),$("#shotwell").css("top",t)}}function ShutdownSystem(){var e=this;this.init=function(){$("#shutdown-window  .control .close").bind("click",function(){e.close()}),$("#shutdown-window .content .shutdown-buttons div").bind("click",function(){var t=$(this).attr("class").replace(" highlight","");switch(t){case"shutdown":e.shutdownClicked();break;case"cancel":e.cancelClicked()}}),this.center()},this.cancelClicked=function(){this.close()},this.shutdownClicked=function(){window.location.href="http://www.ubuntu.com/ubuntu/take-the-tour"},this.open=function(){this.resize(),$("#shutdown-window").show(),$("#shutdown-window ").trigger("mousedown")},this.close=function(){$("#shutdown-window").hide(),this.center()},this.resize=function(){var e=$(document).width()/2-$("#shutdown-window").width()/2,t=$(document).height()/2-$("#shutdown-window").height()/2;$("#shutdown-window").css("left",e),$("#shutdown-window").css("top",t-100)},this.center=function(){var e=$(document).width()/2-$("#shutdown-window").width()/2,t=$(document).height()/2-$("#shutdown-window").height()/2;$("#shutdown-window").css("left",e),$("#shutdown-window").css("top",t-100)}}function MoviePlayerSystem(e){var t=e,i=this,s=!1,n=!1,o=!1;this.init=function(){this.setupControl()},this.setupControl=function(){$("#movieplayer  .control .close").click(function(){i.close()}),$("#movieplayer  .control .min").click(function(){i.min()}),$("#movieplayer  .control .max").click(function(){n?(n=!1,$("#movieplayer").css("width","700px"),$("#movieplayer").css("height","497px"),$("#movieplayer").removeClass("fullsize"),t.systemSettings.decreaseFullscreen()):(n=!0,$("#movieplayer").css("width",$(document).width()-70+"px"),$("#movieplayer").css("height",$(document).height()+"px"),$("#movieplayer").addClass("fullsize"),t.systemSettings.increaseFullscreen()),i.resize()}),$("#movieplayer .container .tools .controlbuttons .left .play").click(function(){playClicked()})},this.addVideo=function(){var e='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"  width="'+$("#movieplayer .container .video").width()+'" height="'+$("#movieplayer .container .video").height()+'"  id="videoPlayer"><param name="movie"  value="../videoplayer.swf" />		<param name="wmode" value="transparent" />  <param name="quality" value="high" />		<param name="bgcolor" value="#000000" />		<embed wmode="transparent" src="../videoplayer.swf" quality="high" bgcolor="#000000" width="'+$("#movieplayer .container .video").width()+'" height="'+$("#movieplayer .container .video").height()+'"  name="videoPlayer" align="" type="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer"> </embed></object>';$("#movieplayer .container .video").html(e)},this.removeVideo=function(){$("#movieplayer .container .video").html("")},this.open=function(e){s||(this.resize(),this.center(),$("#movieplayer").show()),$("#movieplayer").mousedown(),t.systemMenu.openWindow("movieplayer"),s=!0,$("css3-container").length>0&&($("#movieplayer").prev().css("top",$("#movieplayer").css("top")),$("#movieplayer").prev().css("left",$("#movieplayer").css("left")))},this.close=function(){t.openWindows.movieplayer=!1,n&&t.systemSettings.decreaseFullscreen(),$("#movieplayer ").hide(),t.systemMenu.closeWindow("movieplayer"),$("#movieplayer ").removeClass("fullsize"),i.resize(),o=s=!1,this.removeVideo(),i.center()},this.min=function(){n&&t.systemSettings.decreaseFullscreen(),$("#movieplayer ").hide(),t.systemMenu.wiggle("movieplayer"),o=!0,s=!1},this.isMaximised=function(){return n},this.resize=function(){var e=$("#movieplayer").width(),t=$("#movieplayer").height();$("#videoPlayer embed").attr("width",e),$("#videoPlayer").attr("width",e),$("#videoPlayer").attr("height",t),$("#videoPlayer embed").attr("height",t-27)},this.center=function(){var e=$(document).width()/2-$("#movieplayer").width()/2,t=Math.max(24,$(document).height()/2-$("#movieplayer").height()/2);$("#movieplayer").css("left",e),$("#movieplayer").css("top",t)}}function getFlashMovieObject(e){return window.document[e]?window.document[e]:-1!=navigator.appName.indexOf("Microsoft Internet")?document.getElementById(e):document.embeds&&document.embeds[e]?document.embeds[e]:void 0}function playClicked(){var e=getFlashMovieObject("videoPlayer");e.playClicked("fg")}function LibreSystem(e){var t=this,i=e;this.init=function(){$("#libreoffice-calc-window   .control .close").bind("click",function(){t.close("calc")}),$("#libreoffice-writer-window   .control .close").bind("click",function(){t.close("writer")}),$("#libreoffice-impress-window   .control .close").bind("click",function(){t.close("impress")}),$("#libreoffice-calc-window .content").bind("click",function(){i.errorMessage.open()}),$("#libreoffice-writer-window .content").bind("click",function(){i.errorMessage.open()}),$("#libreoffice-impress-window .content").bind("click",function(){i.errorMessage.open()}),this.center("calc"),this.center("writer")},this.open=function(e){$("#libreoffice-"+e+"-window").show(),$("#libreoffice-"+e+"-window ").trigger("mousedown"),this.center(e),$("css3-container").length>0&&($("#libreoffice-"+e+"-window").prev().css("top",$("#libreoffice-"+e+"-window").css("top")),$("#libreoffice-"+e+"-window").prev().css("left",$("#libreoffice-"+e+"-window").css("left")))},this.close=function(e){$("#libreoffice-"+e+"-window").is(":visible")&&(i.openWindows["libreoffice-"+e+"-window"]=!1,$("#libreoffice-"+e+"-window").hide(),this.center(e),i.systemMenu.closeWindow(e))},this.center=function(e){var t=$(document).width()/2-$("#libreoffice-"+e+"-window").width()/2,i=Math.max(24,$(document).height()/2-$("#libreoffice-"+e+"-window").height()/2);$("#libreoffice-"+e+"-window").css("left",t),$("#libreoffice-"+e+"-window").css("top",i)}}function SoftwareSystem(e){var t=this,i=e,s=!1,n=!1,o=!1,r=null,a=new Array,l="",d="",c="",m="",h="",u="";this.init=function(){$("#software-centre .loading-bar").hide(),$("#software-centre .detailed .price .progress").css("width","0"),$("#software-centre .control .close").click(function(){t.close()}),$("#software-centre  .control .min").click(function(){t.min()}),$("#software-centre  .control .max").click(function(){n?(n=!1,$("#software-centre").css("width","800px"),$("#software-centre").css("height","550px"),$("#software-centre").removeClass("fullsize"),i.systemSettings.decreaseFullscreen()):(n=!0,$("#software-centre").css("width",$(document).width()-70+"px"),$("#software-centre").css("height",$(document).height()+"px"),$("#software-centre").addClass("fullsize"),i.systemSettings.increaseFullscreen()),t.resize()}),$("#software-centre .top-panel .back").bind("click",function(){$(this).hasClass("disabled")||($("#software-centre .home").show(),$("#software-centre .detailed").hide(),$(this).addClass("disabled"),$("#software-centre .top-panel .forward").removeClass("disabled"))}),$("#software-centre .top-panel .forward").bind("click",function(){$(this).hasClass("disabled")||(t.loadApp(),$(this).addClass("disabled"))}),$("#software-centre .whats-new .app-container div").click(function(){r=$(this).attr("class"),$("#software-centre .top-panel .forward").addClass("disabled"),t.loadApp()}),this.setupInstall(),this.setupTopButtons(),this.center()},this.loadApp=function(){var e=!1;switch($("#software-centre .top-panel .back").removeClass("disabled"),$("#software-centre .detailed .price .theprice").removeClass("installed"),$("#software-centre .detailed .price .button").text(_install_),1==a[r]&&t.installedApp(),r){case"chromium":l=_price_free_,d=_chromium_app_,c=_chromium_sub_,m="../img/software-centre/logo-chromium.png",h=_chromium_desc_,u="../img/software-centre/screenshot-chromium.jpg";break;case"beep":l="$9.99",d=_beep_app_,c=_beep_sub_,m="../img/software-centre/logo-beep.png",h=_beep_desc_,u="../img/software-centre/screenshot-beep.jpg";break;case"inkscape":l=_price_free_,d=_inkscape_app_,c=_inkscape_sub_,m="../img/software-centre/logo-inkscape.png",h=_inkscape_desc_,u="../img/software-centre/screenshot-inkscape.jpg";break;case"worldofgoo":l="$19.95",d=_world_of_goo_app_,c=_world_of_goo_sub_,m="../img/software-centre/logo-world-of-goo.png",h=_world_of_goo_desc_,u="../img/software-centre/screenshot-worldofgoo.jpg";break;case"blender":l=_price_free_,d=_blender_app_,c=_blender_sub_,m="../img/software-centre/logo-blender.png",h=_blender_desc_,u="../img/software-centre/screenshot-blender.jpg";break;case"braid":l="$9.99",d=_braid_app_,c=_braid_sub_,m="../img/software-centre/logo-braid.png",h=_braid_desc_,u="../img/software-centre/screenshot-braid.jpg";break;default:i.errorMessage.open(),e=!0}$("#software-centre .detailed .title h1").text(d),$("#software-centre .detailed .title p.subheading").text(c),$("#software-centre .detailed .title img.app-image").attr("src",m),$("#software-centre .detailed .description").html(h),$("#software-centre .detailed .description-image img").attr("src",u),$("#software-centre .detailed .price .theprice").hasClass(_installed_)?$("#software-centre .detailed .price .theprice").text(_installed_):$("#software-centre .detailed .price .theprice").text(l),e||($("#software-centre .home").hide(),$("#software-centre .detailed").show())},this.setupInstall=function(){$("#software-centre .detailed .price .button").bind("click",function(){1==a[r]?t.removeApp():($(this).hide(),$("#software-centre .loading-bar").show(),$("#software-centre .detailed .price .theprice").text(_installing_+"…"),$("#software-centre .loading-bar .progress").animate({width:150},1500,function(){t.installedApp(),$("#software-centre .loading-bar").hide(),$("#software-centre .detailed .price .button").show()}))})},this.removeApp=function(){$("#software-centre .detailed .price .theprice").text(l),$("#software-centre .detailed .price .theprice").removeClass("installed"),$("#software-centre .detailed .price .theprice").css("background-image","none"),$("#software-centre .detailed .price .button").text(_install_),i.systemOverlay.removeApps(d),a[r]=!1},this.installedApp=function(){$("#software-centre .detailed .price .theprice").text(_installed_),$("#software-centre .detailed .price .theprice").addClass("installed"),$("#software-centre .detailed .price .button").text(_remove_),$("#software-centre .detailed .price .progress").css("width","0"),i.systemOverlay.totalApps.push({name:d,image:m}),a[r]=!0},this.setupTopButtons=function(){$("#software-centre .all-software").bind("click",function(){$("#software-centre .home").show(),$("#software-centre .detailed").hide(),$("#software-centre .top-panel .back").addClass("disabled")})},this.close=function(){o&&($("#software-centre .home").show(),$("#software-centre .detailed").hide(),n&&i.systemSettings.decreaseFullscreen(),$("#software-centre ").hide(),i.systemMenu.closeWindow("software"),$("#software-centre ").removeClass("fullsize"),t.resize(),s=o=!1,t.center(),$("css3-container").length>0&&($("#software-centre").prev().css("top",$("#software-centre").css("top")),$("#software-centre").prev().css("left",$("#software-centre").css("left"))))},this.min=function(){n&&i.systemSettings.decreaseFullscreen(),$("#software-centre ").hide(),i.systemMenu.wiggle("software"),s=!0},this.resize=function(){var e=$("#software-centre").height()-($("#software-centre .top-panel").height()+$("#software-centre .control").height()+6),t=$("#software-centre").width()-($("#software-centre .navigation").width()+50);n&&(e-=27),$("#software-centre .container").css("height",e),$("#software-centre .container .whats-new").css("width",t)},this.center=function(){var e=$(document).width()/2-$("#software-centre ").width()/2,t=Math.max(24,$(document).height()/2-$("#software-centre ").height()/2);$("#software-centre ").css("left",e),$("#software-centre ").css("top",t)},this.isMaximised=function(){return n},this.open=function(e){void 0!=e&&(r=e,this.loadApp()),this.resize(),this.center(),$("#software-centre").show(),o=!0,i.systemMenu.openWindow("software"),$("css3-container").length>0&&($("#software-centre").prev().css("top",$("#software-centre").css("top")),$("#software-centre").prev().css("left",$("#software-centre").css("left")))}}function NotificationSystem(){var e,t,i,s;this.init=function(){e=this,t=!1,i=new Array,s=null},this.displayNotification=function(e,s,n){i.push({img:e,title:s,desc:n}),t||this.showNotification()},this.showNotification=function(){t=!0,$("body").append('<div class="notification"><img src="'+i[0].img+'"/><p class="title">'+i[0].title+'</p><p class="description">'+i[0].desc+"</p></div>"),$(".notification").bind("mouseover",function(){e.stopTimeout()}),$(".notification").bind("mouseout",function(){e.startTimeout()}),$(".notification").fadeTo(1e3,1,e.startTimeout)},this.startTimeout=function(){s=setTimeout(function(){$(".notification").fadeTo(1e3,0,e.killTimeout)},3e3)},this.killTimeout=function(){$(".notification").remove(),$(".notification").unbind("mouseover"),$(".notification").unbind("mouseout"),clearInterval(s),s=null,t=!1,e.runNext()},this.runNext=function(){i.splice(0,1),i.length>0&&this.showNotification()},this.stopTimeout=function(){clearInterval(s),s=null}}var hiddenTranslation=$("#Translation-Strings"),_email_1_title_=$.trim(hiddenTranslation.find("._email_1_title_").text()),_email_2_title_=$.trim(hiddenTranslation.find("._email_2_title_").text()),_email_3_title_=$.trim(hiddenTranslation.find("._email_3_title_").text()),_email_4_title_=$.trim(hiddenTranslation.find("._email_4_title_").text()),_email_5_title_=$.trim(hiddenTranslation.find("._email_5_title_").text()),_email_1_body_=$.trim(hiddenTranslation.find("._email_1_body_").text()),_email_2_body_=$.trim(hiddenTranslation.find("._email_2_body_").text()),_email_3_body_=$.trim(hiddenTranslation.find("._email_3_body_").text()),_email_4_body_=$.trim(hiddenTranslation.find("._email_4_body_").text()),_email_5_body_=$.trim(hiddenTranslation.find("._email_5_body_").text()),_random_reply_=$.trim(hiddenTranslation.find("._random_reply_").text()),_write_=$.trim(hiddenTranslation.find("._write_").text()),_no_subject_=$.trim(hiddenTranslation.find("._no_subject_").text()),_recipient_=$.trim(hiddenTranslation.find("._recipient_").text()),_from_=$.trim(hiddenTranslation.find("._from_").text()),_you_=$.trim(hiddenTranslation.find("._you_").text()),_on_=$.trim(hiddenTranslation.find("._on_").text()),_wrote_=$.trim(hiddenTranslation.find("._wrote_").text()),_original_message_=$.trim(hiddenTranslation.find("._original_message_").text()),_fwd_=$.trim(hiddenTranslation.find("._fwd_").text()),_home_folder_=$.trim(hiddenTranslation.find("._home_folder_").text()),_desktop_folder_=$.trim(hiddenTranslation.find("._desktop_folder_").text()),_pictures_folder_=$.trim(hiddenTranslation.find("._pictures_folder_").text()),_videos_folder_=$.trim(hiddenTranslation.find("._videos_folder_").text()),_music_folder_=$.trim(hiddenTranslation.find("._music_folder_").text()),_downloads_folder_=$.trim(hiddenTranslation.find("._downloads_folder_").text()),_documents_folder_=$.trim(hiddenTranslation.find("._documents_folder_").text()),_canonical_folder_=$.trim(hiddenTranslation.find("._canonical_folder_").text()),_backup_folder_=$.trim(hiddenTranslation.find("._backup_folder_").text()),_local_folder_=$.trim(hiddenTranslation.find("._local_folder_").text()),_work_folder_=$.trim(hiddenTranslation.find("._work_folder_").text()),_branches_folder_=$.trim(hiddenTranslation.find("._branches_folder_").text()),_rubbish_bin_folder_=$.trim(hiddenTranslation.find("._rubbish_bin_folder_").text()),_string_selected_=$.trim(hiddenTranslation.find("._string_selected_").text()),_string_containing_=$.trim(hiddenTranslation.find("._string_containing_").text()),_string_items_=$.trim(hiddenTranslation.find("._string_items_").text()),_remove_=$.trim(hiddenTranslation.find("._remove_").text()),_price_free_=$.trim(hiddenTranslation.find("._price_free_").text()),_installed_=$.trim(hiddenTranslation.find("._installed_").text()),_install_=$.trim(hiddenTranslation.find("._install_").text()),_installing_=$.trim(hiddenTranslation.find("._installing_").text()),_chromium_app_=$.trim(hiddenTranslation.find("._chromium_app_").text()),_chromium_sub_=$.trim(hiddenTranslation.find("._chromium_sub_").text()),_chromium_desc_=$.trim(hiddenTranslation.find("._chromium_desc_").text()),_beep_app_=$.trim(hiddenTranslation.find("._beep_app_").text()),_beep_sub_=$.trim(hiddenTranslation.find("._beep_sub_").text()),_beep_desc_=$.trim(hiddenTranslation.find("._beep_desc_").text()),_inkscape_app_=$.trim(hiddenTranslation.find("._inkscape_app_").text()),_inkscape_sub_=$.trim(hiddenTranslation.find("._inkscape_sub_").text()),_inkscape_desc_=$.trim(hiddenTranslation.find("._inkscape_desc_").text()),_world_of_goo_app_=$.trim(hiddenTranslation.find("._world_of_goo_app_").text()),_world_of_goo_sub_=$.trim(hiddenTranslation.find("._world_of_goo_sub_").text()),_world_of_goo_desc_=$.trim(hiddenTranslation.find("._world_of_goo_desc_").text()),_blender_app_=$.trim(hiddenTranslation.find("._blender_app_").text()),_blender_sub_=$.trim(hiddenTranslation.find("._blender_sub_").text()),_blender_desc_=$.trim(hiddenTranslation.find("._blender_desc_").text()),_braid_app_=$.trim(hiddenTranslation.find("._braid_app_").text()),_braid_sub_=$.trim(hiddenTranslation.find("._braid_sub_").text()),_braid_desc_=$.trim(hiddenTranslation.find("._braid_desc_").text()),_rhythmbox_app_=$.trim(hiddenTranslation.find("._rhythmbox_app_").text()),_brasero_app_=$.trim(hiddenTranslation.find("._brasero_app_").text()),_movie_player_app_=$.trim(hiddenTranslation.find("._movie_player_app_").text()),_shotwell_app_=$.trim(hiddenTranslation.find("._shotwell_app_").text()),_pitivi_app_=$.trim(hiddenTranslation.find("._pitivi_app_").text()),_sound_recorder_app_=$.trim(hiddenTranslation.find("._sound_recorder_app_").text()),_empathy_app_=$.trim(hiddenTranslation.find("._empathy_app_").text()),_thunderbird_app_=$.trim(hiddenTranslation.find("._thunderbird_app_").text()),_ubuntu_one_app_=$.trim(hiddenTranslation.find("._ubuntu_one_app_").text()),_firefox_app_=$.trim(hiddenTranslation.find("._firefox_app_").text()),_gwibber_app_=$.trim(hiddenTranslation.find("._gwibber_app_").text()),_remote_desktop_app_=$.trim(hiddenTranslation.find("._remote_desktop_app_").text()),_terminal_app_=$.trim(hiddenTranslation.find("._terminal_app_").text()),_about_me_app_=$.trim(hiddenTranslation.find("._about_me_app_").text()),_additional_drivers_app_=$.trim(hiddenTranslation.find("._additional_drivers_app_").text()),_aisleroit_app_=$.trim(hiddenTranslation.find("._aisleroit_app_").text()),_appearance_app_=$.trim(hiddenTranslation.find("._appearance_app_").text()),_bluetooth_app_=$.trim(hiddenTranslation.find("._bluetooth_app_").text()),_ubuntu_software_center_app_=$.trim(hiddenTranslation.find("._ubuntu_software_center_app_").text()),_ubuntu_one_music_app_=$.trim(hiddenTranslation.find("._ubuntu_one_music_app_").text()),_amazon_app_=$.trim(hiddenTranslation.find("._amazon_app_").text()),_search_=$.trim(hiddenTranslation.find("._search_").text()),_turn_off_bluetooth_=$.trim(hiddenTranslation.find("._turn_off_bluetooth_").text()),_turn_on_bluetooth_=$.trim(hiddenTranslation.find("._turn_on_bluetooth_").text()),_visible_=$.trim(hiddenTranslation.find("._visible_").text()),_mute_=$.trim(hiddenTranslation.find("._mute_").text()),_unmute_=$.trim(hiddenTranslation.find("._unmute_").text()),_shut_down_=$.trim(hiddenTranslation.find("._shut_down_").text()),_photo_size_=$.trim(hiddenTranslation.find("._photo_size_").text()),_photo_date_=$.trim(hiddenTranslation.find("._photo_date_").text()),_buck_off_title_=$.trim(hiddenTranslation.find("._buck_off_title_").text()),_darkening_clockwork_title_=$.trim(hiddenTranslation.find("._darkening_clockwork_title_").text()),_darkening_clockwork_size_=$.trim(hiddenTranslation.find("._darkening_clockwork_size_").text()),_dybbølsbro_station_title_=$.trim(hiddenTranslation.find("._dybbølsbro_station_title_").text()),_federica_miglio_title_=$.trim(hiddenTranslation.find("._federica_miglio_title_").text()),_jardin_polar_title_=$.trim(hiddenTranslation.find("._jardin_polar_title_").text()),_langelinie_alle_title_=$.trim(hiddenTranslation.find("._langelinie_alle_title_").text()),_momiji_dream_title_=$.trim(hiddenTranslation.find("._momiji_dream_title_").text()),_mount_snowdon_title_=$.trim(hiddenTranslation.find("._mount_snowdon_title_").text()),_not_alone_title_=$.trim(hiddenTranslation.find("._not_alone_title_").text()),_power_of_words_title_=$.trim(hiddenTranslation.find("._power_of_words_title_").text()),_purple_dancers_title_=$.trim(hiddenTranslation.find("._purple_dancers_title_").text()),_sand_maze_title_=$.trim(hiddenTranslation.find("._sand_maze_title_").text()),_small_flowers_title_=$.trim(hiddenTranslation.find("._small_flowers_title_").text()),_stalking_ocelot_title_=$.trim(hiddenTranslation.find("._stalking_ocelot_title_").text()),_the_grass_aint_greener_title_=$.trim(hiddenTranslation.find("._the_grass_aint_greener_title_").text()),_wildWheat_title_=$.trim(hiddenTranslation.find("._wildWheat_title_").text()),_introduction_ubuntu_title_=$.trim(hiddenTranslation.find("._introduction_ubuntu_title_").text()),_video_size_=$.trim(hiddenTranslation.find("._video_size_").text()),_video_date_=$.trim(hiddenTranslation.find("._video_date_").text()),_Happiness_title_=$.trim(hiddenTranslation.find("._Happiness_title_").text()),_music_size_=$.trim(hiddenTranslation.find("._music_size_").text()),_music_date_=$.trim(hiddenTranslation.find("._music_date_").text()),_download_cta_=$.trim(hiddenTranslation.find("._download_cta_").text()),_this=this,movingFolder=null,folderXOffset=0,folderYOffset=0,fileSystem=null,systemOverlay=null,systemMenu=null,firefoxSystem=null,emailSystem=null,ubuntuOneSystem=null,systemSettings=null,errorMessage=null,shutdownSystem=null,libreSystem=null,currentSystemSelected=null,currentSelectedFullscreen=!1,shotwellSystem=null,welcomeSystem=null,moviePlayerSystem=null,guidedTourSystem=null,notificationSystem=null,softwareSystem=null,fileLibrary=new Array,openWindows=new Array;
$(document).ready(function(){$.browser.msie&&"8.0"!=$.browser.version&&"9.0"!=$.browser.version?window.location.href="/ubuntu/take-the-tour-gallery":setup()});var scrollingTimer=null,_gaq=_gaq||[];if(_gaq.push(["_setAccount","UA-1018242-4"]),_gaq.push(["_trackPageview"]),-1!=window.location.pathname.indexOf("search/google-appliance")){var qs=window.location.pathname.substring(25);pageTracker._trackPageview("/site_search?query="+qs)}!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();